{"ast":null,"code":"var _jsxFileName = \"/home/gauravpendherkar/DemoWriti/src/containers/Version/index.js\";\nimport React, { useEffect, useState } from 'react';\nimport Header from '../Version/components/Header';\nimport VersionUpsertForm from '../Version/components/VersionUpsertForm';\nimport Table from '../../../src/components/common/Table/index';\nimport { Edit, Cancel } from '../../../src/assets/images/resident-detail/index';\nimport { Toast } from '../../../src/components/common/Toast';\nimport ActiveDeactive from '../../../src/components/common/ActiveDeactive';\nimport HardUpdate from './components/HardUpdate';\nimport axios from '../../services/api/config';\nimport { VERSION_PLATFORM } from '../../../src/constants/common';\nimport Uploader, { FILE_TYPES, FILE_CATEGORY } from '../../../src/components/common/Upload/Uploader';\nimport { displayDateTime } from '../../../src/util/moment';\nimport { versionPaginate, versionDelete, versionUpsert, versionUpdate, versionActiveDeActive, versionHardUpdate } from '../../../src/services/api/routes/version';\nimport { fileUpload } from '../../../src/services/api/routes/common';\nimport ConfirmPopup from '../../../src/components/common/ConfirmPopup';\nimport { createForm } from 'rc-form';\n\nconst _ = require('lodash');\n\nconst Version = props => {\n  const {\n    form\n  } = props;\n  const {\n    resetFields\n  } = form;\n  const [isVisible, setIsVisible] = useState(false);\n  const [visible, setVisible] = useState(false);\n  const [editModal, setEditModal] = useState(false);\n  const [deletePopup, setDeletePopup] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [getSpecificRecord, setSpecificRecord] = useState('');\n  const [uploadData, setUploadData] = useState('');\n  const [filePath, setFilePath] = useState('');\n  const [data, setData] = useState([]);\n  const [total, setTotal] = useState(0);\n  const [radioValue, setRadioValue] = useState(VERSION_PLATFORM.ANDROID);\n  const initialFilter = {\n    // page: 1,\n    // limit: 10,\n    fields: [],\n    find: {},\n    sortBy: {\n      createdAt: 'DESC'\n    }\n  };\n  const [filter, setFilter] = useState(initialFilter);\n  useEffect(() => {\n    if (uploadData) {\n      uploadData && uploadData.length && uploadData.map(data => {\n        return setFilePath(data.path);\n      });\n    }\n  }, [uploadData]);\n\n  const hadleRadioValue = e => {\n    if (e.target.checked) {\n      setRadioValue(parseInt(e.target.value));\n    }\n  };\n\n  useEffect(() => {\n    if (radioValue) {\n      fetch();\n    }\n  }, [radioValue]);\n\n  const fetch = () => {\n    setLoading(true);\n    axios({ ...versionPaginate,\n      data: {\n        query: { ...filter\n        }\n      }\n    }).then(response => {\n      var _response$data;\n\n      if (((_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.code) == 'OK') {\n        if (radioValue == VERSION_PLATFORM.ANDROID) {\n          setData(response.data.data.list.android);\n          setTotal(response.data.data.list.android.length);\n          setLoading(false);\n        } else if (radioValue == VERSION_PLATFORM.WINDOWS) {\n          setData(response.data.data.list.windows);\n          setTotal(response.data.data.list.windows.length);\n          setLoading(false);\n        } else if (radioValue == VERSION_PLATFORM.IPHONE) {\n          setData(response.data.data.list.iphone);\n          setTotal(response.data.data.list.iphone.length);\n          setLoading(false);\n        } else if (radioValue == VERSION_PLATFORM.HOME_BACKUP) {\n          setData(response.data.data.list.homeBackup);\n          setTotal(response.data.data.list.homeBackup.length);\n          setLoading(false);\n        } else if (radioValue == VERSION_PLATFORM.PRINT_EXE) {\n          setData(response.data.data.list.printExe);\n          setTotal(response.data.data.list.printExe.length);\n          setLoading(false);\n        } else {\n          setData(response.data.data.list);\n          setTotal(response.data.data.count);\n          setLoading(false);\n        } // setLoading(false);\n\n      } else {\n        setLoading(false);\n      }\n    }).catch(err => {\n      setLoading(false);\n    });\n  };\n\n  const handleActiveDeactive = record => {\n    let tempData = data.map(rec => {\n      if (rec._id === record._id) {\n        return { ...rec,\n          isActive: !rec.isActive\n        };\n      } else {\n        return rec;\n      }\n    });\n    setData(tempData);\n    fetch(tempData);\n  };\n\n  const handleHardUpdate = record => {\n    let tempData = data.map(rec => {\n      if (rec._id === record._id) {\n        return { ...rec,\n          isHardUpdate: !rec.isHardUpdate\n        };\n      } else {\n        return rec;\n      }\n    });\n    setData(tempData);\n  };\n\n  const getColumns = () => [{\n    title: 'Sr.No',\n    keyword: 'index',\n    dataIndex: 'index',\n    render: (text, record, index) => index + 1\n  }, {\n    title: 'Name.',\n    dataIndex: 'name',\n    render: (text, record) => /*#__PURE__*/React.createElement(React.Fragment, null, text ? text : '')\n  }, {\n    title: 'Version',\n    dataIndex: 'number',\n    render: text => /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 25\n      }\n    }, text ? text : '')\n  }, {\n    title: 'Date',\n    dataIndex: 'createdAt',\n    render: text => /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        textTransform: 'capitalize'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }\n    }, text ? displayDateTime(text) : ' ')\n  }, {\n    title: 'Active',\n    dataIndex: 'isActive',\n    render: (text, record) => /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        textTransform: 'capitalize'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(ActiveDeactive, {\n      status: record.isActive,\n      documentId: record._id,\n      API: versionActiveDeActive,\n      record: record,\n      fieldName: record.isActive,\n      onActiveDeactive: record => {\n        handleActiveDeactive(record);\n      },\n      extraRequest: {\n        platform: radioValue\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 11\n      }\n    })),\n    filters: [{\n      text: 'Active',\n      value: true\n    }, {\n      text: 'De-active',\n      value: false\n    }],\n    onFilter: (value, record) => record.isActive === value\n  }, {\n    title: 'Update',\n    dataIndex: 'isHardUpdate',\n    render: (text, record) => /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        textTransform: 'capitalize'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(HardUpdate, {\n      documentId: record._id,\n      API: versionHardUpdate,\n      record: record,\n      isHardUpdate: record.isHardUpdate,\n      onHardUpdate: record => {\n        handleHardUpdate(record);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 11\n      }\n    }))\n  }, {\n    title: 'Action',\n    showRefresh: true,\n    render: (text, record) => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"actions\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      onClick: () => {\n        handleEditModal(record);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Edit, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 15\n      }\n    }, \"Edit\")), /*#__PURE__*/React.createElement(\"a\", {\n      onClick: () => {\n        handleDeletePopupOpen(record);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Cancel, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 15\n      }\n    }, \"Delete\"))))\n  }];\n\n  const handleUpsertModal = () => {\n    resetFields();\n    setIsVisible(true);\n  };\n\n  const handleCloseUpsertModal = () => {\n    setIsVisible(false);\n  };\n\n  const handleEditModal = data => {\n    setSpecificRecord(data);\n    setEditModal(true);\n  };\n\n  const handleEditModalClose = () => {\n    setEditModal(false);\n  };\n\n  const handleDeletePopupOpen = data => {\n    setSpecificRecord(data);\n    setDeletePopup(true);\n  };\n\n  const handleDeletePopupClose = () => {\n    setDeletePopup(false);\n  };\n\n  const handleSubmit = values => {\n    if (getSpecificRecord._id) {\n      let {\n        method,\n        url,\n        baseURL\n      } = versionUpdate;\n      url = `${url}/${getSpecificRecord._id}`;\n      axios({\n        method,\n        url,\n        baseURL,\n        data: values\n      }).then(response => {\n        if (response.data.code == 'OK') {\n          setEditModal(false);\n          Toast.success(response.data.message);\n          fetch();\n        }\n      }).catch(error => {\n        setIsVisible(false);\n        Toast.error(error);\n      });\n    } else {\n      let {\n        method,\n        url,\n        baseURL\n      } = versionUpsert;\n      axios({\n        method,\n        url,\n        baseURL,\n        data: values\n      }).then(response => {\n        if (response.data.code == 'OK') {\n          setIsVisible(false);\n          Toast.success(response.data.message);\n          fetch();\n        }\n      }).catch(error => {\n        setIsVisible(false);\n        Toast.error(error);\n      });\n    }\n  };\n\n  const handleDeleteRecord = id => {\n    let {\n      url,\n      method,\n      baseURL\n    } = versionDelete;\n    url = `${url}/${id}`;\n    axios({\n      url,\n      method,\n      baseURL\n    }).then(data => {\n      if (data.data.code == 'OK') {\n        setDeletePopup(false);\n        fetch();\n        Toast.success(data.data.message);\n      } else {\n        Toast.error(data.data.message);\n      }\n    }).catch(error => {\n      Toast.error(error);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pmr_wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    total: total,\n    radioValue: radioValue,\n    hadleRadioValue: hadleRadioValue,\n    onAdd: handleUpsertModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Table, {\n    columns: getColumns(),\n    datasource: data,\n    loading: loading,\n    pagination: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 11\n    }\n  }))), isVisible ? /*#__PURE__*/React.createElement(VersionUpsertForm, {\n    uploaderOpen: () => {\n      setVisible(true);\n    } // value={getSpecificRecord}\n    ,\n    filePath: filePath,\n    radioValue: radioValue,\n    hadleRadioValue: hadleRadioValue,\n    form: form,\n    isVisible: isVisible,\n    okText: \"Add\",\n    cancelText: \"Cancel\",\n    title: \"Add version\",\n    onOk: handleSubmit,\n    onClose: handleCloseUpsertModal,\n    onCancel: handleCloseUpsertModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 9\n    }\n  }) : null, editModal && /*#__PURE__*/React.createElement(VersionUpsertForm, {\n    radioValue: radioValue,\n    hadleRadioValue: hadleRadioValue,\n    form: form,\n    isVisible: editModal,\n    onCancel: handleEditModalClose,\n    onClose: handleEditModalClose,\n    value: getSpecificRecord,\n    filePath: filePath,\n    onOk: handleSubmit,\n    okText: \"Update\",\n    cancelText: \"Cancel\",\n    title: \"Edit Version\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 9\n    }\n  }), deletePopup && /*#__PURE__*/React.createElement(ConfirmPopup, {\n    value: getSpecificRecord,\n    visible: deletePopup,\n    title: `Delete Note -  ${getSpecificRecord.name}`,\n    description: \"Are you want to delete this record\",\n    onOk: () => {\n      handleDeleteRecord(getSpecificRecord._id);\n    },\n    okText: \"Yes\",\n    cancelText: \"Cancel\",\n    onClose: handleDeletePopupClose,\n    onCancel: handleDeletePopupClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 370,\n      columnNumber: 9\n    }\n  }), visible && /*#__PURE__*/React.createElement(Uploader, {\n    visible: visible,\n    onRequestClose: () => {\n      setVisible(false);\n    },\n    title: \"Upload EXE file\",\n    multiple: false,\n    uploadUrl: { ...fileUpload\n    },\n    allowedTypes: [FILE_TYPES.EXE],\n    extraData: {\n      isUploadToS3: true,\n      category: [FILE_CATEGORY.EXE].join(',')\n    },\n    maxSizeInMB: 1000,\n    onError: err => {\n      setVisible(true);\n    },\n    onSuccess: uploaded => {\n      if (uploaded.code == 'OK') {\n        setUploadData(uploaded.data);\n        setVisible(false);\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 386,\n      columnNumber: 9\n    }\n  }));\n};\n\nexport default createForm()(Version);","map":{"version":3,"sources":["/home/gauravpendherkar/DemoWriti/src/containers/Version/index.js"],"names":["React","useEffect","useState","Header","VersionUpsertForm","Table","Edit","Cancel","Toast","ActiveDeactive","HardUpdate","axios","VERSION_PLATFORM","Uploader","FILE_TYPES","FILE_CATEGORY","displayDateTime","versionPaginate","versionDelete","versionUpsert","versionUpdate","versionActiveDeActive","versionHardUpdate","fileUpload","ConfirmPopup","createForm","_","require","Version","props","form","resetFields","isVisible","setIsVisible","visible","setVisible","editModal","setEditModal","deletePopup","setDeletePopup","loading","setLoading","getSpecificRecord","setSpecificRecord","uploadData","setUploadData","filePath","setFilePath","data","setData","total","setTotal","radioValue","setRadioValue","ANDROID","initialFilter","fields","find","sortBy","createdAt","filter","setFilter","length","map","path","hadleRadioValue","e","target","checked","parseInt","value","fetch","query","then","response","code","list","android","WINDOWS","windows","IPHONE","iphone","HOME_BACKUP","homeBackup","PRINT_EXE","printExe","count","catch","err","handleActiveDeactive","record","tempData","rec","_id","isActive","handleHardUpdate","isHardUpdate","getColumns","title","keyword","dataIndex","render","text","index","textTransform","platform","filters","onFilter","showRefresh","handleEditModal","handleDeletePopupOpen","handleUpsertModal","handleCloseUpsertModal","handleEditModalClose","handleDeletePopupClose","handleSubmit","values","method","url","baseURL","success","message","error","handleDeleteRecord","id","name","EXE","isUploadToS3","category","join","uploaded"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Header from '../Version/components/Header';\nimport VersionUpsertForm from '../Version/components/VersionUpsertForm';\nimport Table from '../../../src/components/common/Table/index';\nimport { Edit, Cancel } from '../../../src/assets/images/resident-detail/index';\nimport { Toast } from '../../../src/components/common/Toast';\nimport ActiveDeactive from '../../../src/components/common/ActiveDeactive';\nimport HardUpdate from './components/HardUpdate';\nimport axios from '../../services/api/config';\nimport { VERSION_PLATFORM } from '../../../src/constants/common';\nimport Uploader, {\n  FILE_TYPES,\n  FILE_CATEGORY,\n} from '../../../src/components/common/Upload/Uploader';\nimport { displayDateTime } from '../../../src/util/moment';\nimport {\n  versionPaginate,\n  versionDelete,\n  versionUpsert,\n  versionUpdate,\n  versionActiveDeActive,\n  versionHardUpdate,\n} from '../../../src/services/api/routes/version';\nimport { fileUpload } from '../../../src/services/api/routes/common';\nimport ConfirmPopup from '../../../src/components/common/ConfirmPopup';\nimport { createForm } from 'rc-form';\nconst _ = require('lodash');\n\nconst Version = (props) => {\n  const { form } = props;\n  const { resetFields } = form;\n  const [isVisible, setIsVisible] = useState(false);\n  const [visible, setVisible] = useState(false);\n  const [editModal, setEditModal] = useState(false);\n  const [deletePopup, setDeletePopup] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [getSpecificRecord, setSpecificRecord] = useState('');\n  const [uploadData, setUploadData] = useState('');\n  const [filePath, setFilePath] = useState('');\n  const [data, setData] = useState([]);\n  const [total, setTotal] = useState(0);\n  const [radioValue, setRadioValue] = useState(VERSION_PLATFORM.ANDROID);\n  const initialFilter = {\n    // page: 1,\n    // limit: 10,\n    fields: [],\n    find: {},\n    sortBy: { createdAt: 'DESC' },\n  };\n  const [filter, setFilter] = useState(initialFilter);\n\n  useEffect(() => {\n    if (uploadData) {\n      uploadData &&\n        uploadData.length &&\n        uploadData.map((data) => {\n          return setFilePath(data.path);\n        });\n    }\n  }, [uploadData]);\n\n  const hadleRadioValue = (e) => {\n    if (e.target.checked) {\n      setRadioValue(parseInt(e.target.value));\n    }\n  };\n\n  useEffect(() => {\n    if (radioValue) {\n      fetch();\n    }\n  }, [radioValue]);\n\n  const fetch = () => {\n    setLoading(true);\n    axios({\n      ...versionPaginate,\n      data: { query: { ...filter } },\n    })\n      .then((response) => {\n        if (response.data?.code == 'OK') {\n          if (radioValue == VERSION_PLATFORM.ANDROID) {\n            setData(response.data.data.list.android);\n            setTotal(response.data.data.list.android.length);\n            setLoading(false);\n          } else if (radioValue == VERSION_PLATFORM.WINDOWS) {\n            setData(response.data.data.list.windows);\n            setTotal(response.data.data.list.windows.length);\n            setLoading(false);\n          } else if (radioValue == VERSION_PLATFORM.IPHONE) {\n            setData(response.data.data.list.iphone);\n            setTotal(response.data.data.list.iphone.length);\n            setLoading(false);\n          } else if (radioValue == VERSION_PLATFORM.HOME_BACKUP) {\n            setData(response.data.data.list.homeBackup);\n            setTotal(response.data.data.list.homeBackup.length);\n            setLoading(false);\n          } else if (radioValue == VERSION_PLATFORM.PRINT_EXE) {\n            setData(response.data.data.list.printExe);\n            setTotal(response.data.data.list.printExe.length);\n            setLoading(false);\n          } else {\n            setData(response.data.data.list);\n            setTotal(response.data.data.count);\n            setLoading(false);\n          }\n          // setLoading(false);\n        } else {\n          setLoading(false);\n        }\n      })\n      .catch((err) => {\n        setLoading(false);\n      });\n  };\n\n  const handleActiveDeactive = (record) => {\n    let tempData = data.map((rec) => {\n      if (rec._id === record._id) {\n        return { ...rec, isActive: !rec.isActive };\n      } else {\n        return rec;\n      }\n    });\n    setData(tempData);\n    fetch(tempData);\n  };\n  const handleHardUpdate = (record) => {\n    let tempData = data.map((rec) => {\n      if (rec._id === record._id) {\n        return { ...rec, isHardUpdate: !rec.isHardUpdate };\n      } else {\n        return rec;\n      }\n    });\n    setData(tempData);\n  };\n\n  const getColumns = () => [\n    {\n      title: 'Sr.No',\n      keyword: 'index',\n      dataIndex: 'index',\n      render: (text, record, index) => index + 1,\n    },\n    {\n      title: 'Name.',\n      dataIndex: 'name',\n      render: (text, record) => <>{text ? text : ''}</>,\n    },\n    {\n      title: 'Version',\n      dataIndex: 'number',\n      render: (text) => <span>{text ? text : ''}</span>,\n    },\n    {\n      title: 'Date',\n      dataIndex: 'createdAt',\n      render: (text) => (\n        <span style={{ textTransform: 'capitalize' }}>\n          {text ? displayDateTime(text) : ' '}\n        </span>\n      ),\n    },\n    {\n      title: 'Active',\n      dataIndex: 'isActive',\n      render: (text, record) => (\n        <span style={{ textTransform: 'capitalize' }}>\n          <ActiveDeactive\n            status={record.isActive}\n            documentId={record._id}\n            API={versionActiveDeActive}\n            record={record}\n            fieldName={record.isActive}\n            onActiveDeactive={(record) => {\n              handleActiveDeactive(record);\n            }}\n            extraRequest={{\n              platform: radioValue,\n            }}\n          />\n        </span>\n      ),\n      filters: [\n        { text: 'Active', value: true },\n        { text: 'De-active', value: false },\n      ],\n      onFilter: (value, record) => record.isActive === value,\n    },\n    {\n      title: 'Update',\n      dataIndex: 'isHardUpdate',\n      render: (text, record) => (\n        <span style={{ textTransform: 'capitalize' }}>\n          <HardUpdate\n            documentId={record._id}\n            API={versionHardUpdate}\n            record={record}\n            isHardUpdate={record.isHardUpdate}\n            onHardUpdate={(record) => {\n              handleHardUpdate(record);\n            }}\n          />\n        </span>\n      ),\n    },\n    {\n      title: 'Action',\n      showRefresh: true,\n      render: (text, record) => (\n        <>\n          <div className='actions'>\n            <a\n              onClick={() => {\n                handleEditModal(record);\n              }}\n            >\n              <Edit />\n              <p>Edit</p>\n            </a>\n            <a\n              onClick={() => {\n                handleDeletePopupOpen(record);\n              }}\n            >\n              <Cancel />\n              <p>Delete</p>\n            </a>\n          </div>\n        </>\n      ),\n    },\n  ];\n\n  const handleUpsertModal = () => {\n    resetFields();\n    setIsVisible(true);\n  };\n\n  const handleCloseUpsertModal = () => {\n    setIsVisible(false);\n  };\n\n  const handleEditModal = (data) => {\n    setSpecificRecord(data);\n    setEditModal(true);\n  };\n\n  const handleEditModalClose = () => {\n    setEditModal(false);\n  };\n\n  const handleDeletePopupOpen = (data) => {\n    setSpecificRecord(data);\n    setDeletePopup(true);\n  };\n\n  const handleDeletePopupClose = () => {\n    setDeletePopup(false);\n  };\n\n  const handleSubmit = (values) => {\n    if (getSpecificRecord._id) {\n      let { method, url, baseURL } = versionUpdate;\n      url = `${url}/${getSpecificRecord._id}`;\n      axios({ method, url, baseURL, data: values })\n        .then((response) => {\n          if (response.data.code == 'OK') {\n            setEditModal(false);\n            Toast.success(response.data.message);\n            fetch();\n          }\n        })\n        .catch((error) => {\n          setIsVisible(false);\n          Toast.error(error);\n        });\n    } else {\n      let { method, url, baseURL } = versionUpsert;\n      axios({ method, url, baseURL, data: values })\n        .then((response) => {\n          if (response.data.code == 'OK') {\n            setIsVisible(false);\n            Toast.success(response.data.message);\n            fetch();\n          }\n        })\n        .catch((error) => {\n          setIsVisible(false);\n          Toast.error(error);\n        });\n    }\n  };\n\n  const handleDeleteRecord = (id) => {\n    let { url, method, baseURL } = versionDelete;\n    url = `${url}/${id}`;\n    axios({ url, method, baseURL })\n      .then((data) => {\n        if (data.data.code == 'OK') {\n          setDeletePopup(false);\n          fetch();\n          Toast.success(data.data.message);\n        } else {\n          Toast.error(data.data.message);\n        }\n      })\n      .catch((error) => {\n        Toast.error(error);\n      });\n  };\n\n  return (\n    <>\n      <div className='pmr_wrap'>\n        <div className='container'>\n          <Header\n            total={total}\n            radioValue={radioValue}\n            hadleRadioValue={hadleRadioValue}\n            onAdd={handleUpsertModal}\n          />\n          <Table\n            columns={getColumns()}\n            datasource={data}\n            loading={loading}\n            pagination={false}\n          />\n        </div>\n      </div>\n      {isVisible ? (\n        <VersionUpsertForm\n          uploaderOpen={() => {\n            setVisible(true);\n          }}\n          // value={getSpecificRecord}\n          filePath={filePath}\n          radioValue={radioValue}\n          hadleRadioValue={hadleRadioValue}\n          form={form}\n          isVisible={isVisible}\n          okText='Add'\n          cancelText='Cancel'\n          title='Add version'\n          onOk={handleSubmit}\n          onClose={handleCloseUpsertModal}\n          onCancel={handleCloseUpsertModal}\n        />\n      ) : null}\n\n      {editModal && (\n        <VersionUpsertForm\n          radioValue={radioValue}\n          hadleRadioValue={hadleRadioValue}\n          form={form}\n          isVisible={editModal}\n          onCancel={handleEditModalClose}\n          onClose={handleEditModalClose}\n          value={getSpecificRecord}\n          filePath={filePath}\n          onOk={handleSubmit}\n          okText='Update'\n          cancelText='Cancel'\n          title='Edit Version'\n        />\n      )}\n\n      {deletePopup && (\n        <ConfirmPopup\n          value={getSpecificRecord}\n          visible={deletePopup}\n          title={`Delete Note -  ${getSpecificRecord.name}`}\n          description='Are you want to delete this record'\n          onOk={() => {\n            handleDeleteRecord(getSpecificRecord._id);\n          }}\n          okText='Yes'\n          cancelText='Cancel'\n          onClose={handleDeletePopupClose}\n          onCancel={handleDeletePopupClose}\n        />\n      )}\n\n      {visible && (\n        <Uploader\n          visible={visible}\n          onRequestClose={() => {\n            setVisible(false);\n          }}\n          title='Upload EXE file'\n          multiple={false}\n          uploadUrl={{ ...fileUpload }}\n          allowedTypes={[FILE_TYPES.EXE]}\n          extraData={{\n            isUploadToS3: true,\n            category: [FILE_CATEGORY.EXE].join(','),\n          }}\n          maxSizeInMB={1000}\n          onError={(err) => {\n            setVisible(true);\n          }}\n          onSuccess={(uploaded) => {\n            if (uploaded.code == 'OK') {\n              setUploadData(uploaded.data);\n              setVisible(false);\n            }\n          }}\n        />\n      )}\n    </>\n  );\n};\n\nexport default createForm()(Version);\n"]},"metadata":{},"sourceType":"module"}