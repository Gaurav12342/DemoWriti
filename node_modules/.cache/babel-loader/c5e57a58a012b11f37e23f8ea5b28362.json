{"ast":null,"code":"var _jsxFileName = \"/home/gauravpendherkar/DemoWriti/src/containers/Master/components/MasterList.js\";\nimport React, { useState, useEffect } from 'react';\nimport InfiniteScroll from 'react-infinite-scroller';\nimport { withRouter, Link } from 'react-router-dom';\nimport { masterPaginate } from '../../../services/api/routes/master';\nimport axios from '../../../services/api/config';\nimport { Search, Toast } from '../../../components/common/index';\nimport { USER_TYPE } from '../../../constants/User';\nimport { MASTER_MEDIUM } from '../../../constants/MasterMedium';\n\nconst MasterList = props => {\n  const {\n    onSelect,\n    authUser\n  } = props;\n  const [data, setData] = useState([]);\n  const isHomeAdmin = authUser && authUser.type === USER_TYPE.HOME.ADMIN;\n  const isPharmacyAdmin = authUser && authUser.type === USER_TYPE.PHARMACY.ADMIN;\n  let filterBy = {\n    masterForMedium: isHomeAdmin ? MASTER_MEDIUM.HOME : isPharmacyAdmin ? MASTER_MEDIUM.PHARMACY : undefined\n  };\n  const [filter, setFilter] = useState({\n    page: 1,\n    fields: [],\n    populate: [{\n      \"homeId\": null\n    }, {\n      \"pharmacyId\": null\n    }],\n    sortBy: {\n      createdAt: 'DESC'\n    },\n    find: {\n      parentId: null,\n      ...filterBy\n    }\n  });\n  useEffect(() => {\n    if (filter.hasOwnProperty('search') && filter.search['keyword']) {\n      const delayDebounceFn = setTimeout(() => {\n        fetch();\n      }, 600);\n      return () => clearTimeout(delayDebounceFn);\n    } else fetch();\n  }, [filter]);\n\n  const handleSearch = event => {\n    let value = event.target.value;\n    let obj = { ...filter,\n      page: 1,\n      search: {\n        keyword: value,\n        keys: ['name', 'code']\n      }\n    };\n    setFilter(obj);\n  };\n\n  const modifiedList = list => {\n    let modifiedList = list.map((current, index) => {\n      return current;\n    });\n    return modifiedList;\n  };\n\n  const fetch = () => {\n    axios({ ...masterPaginate,\n      data: {\n        query: { ...filter\n        }\n      }\n    }).then(({\n      data\n    }) => {\n      if (data.code === 'OK') {\n        let updatedList = modifiedList(data.data.data);\n        let detail = updatedList.find(x => x._id === props.match.params.id);\n        if (detail) onSelect(detail);\n        setData(updatedList);\n      }\n    }).catch(err => {});\n  };\n\n  function getSourceMedium(masterDetail) {\n    return (masterDetail === null || masterDetail === void 0 ? void 0 : masterDetail.masterForMedium) === MASTER_MEDIUM.PHARMACY ? '(Pharmacy)' : (masterDetail === null || masterDetail === void 0 ? void 0 : masterDetail.masterForMedium) === MASTER_MEDIUM.HOME ? '(Home)' : '';\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"master residents_container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"resi_person_wrap masterlist-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    style: {\n      marginLeft: '4%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }\n  }, \"Master\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form_group\",\n    style: {\n      margin: '4%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Search, {\n    allowClear: true,\n    onChange: handleSearch,\n    placeholder: \"Name / Code\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"resi_person_wrap\",\n    style: {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(InfiniteScroll, {\n    initialLoad: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }\n  }, data && data.map(data => {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Link, {\n      style: {\n        color: '#FFFFFF',\n        textDecoration: 'none'\n      },\n      to: `/sub-master/${data._id}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 23\n      }\n    }, data._id === props.match.params.id ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"resi_person opened\",\n      style: {\n        backgroundColor: '#609FAE'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"person_name active\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"full_width\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"r_room\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 35\n      }\n    }, data.name, getSourceMedium(data)))))) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"resi_person\",\n      onClick: () => onSelect(data),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"person_name inactive\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"full_width\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"r_room\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 35\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 37\n      }\n    }, data.name, getSourceMedium(data))))))));\n  }))))));\n};\n\nexport default withRouter(MasterList);","map":{"version":3,"sources":["/home/gauravpendherkar/DemoWriti/src/containers/Master/components/MasterList.js"],"names":["React","useState","useEffect","InfiniteScroll","withRouter","Link","masterPaginate","axios","Search","Toast","USER_TYPE","MASTER_MEDIUM","MasterList","props","onSelect","authUser","data","setData","isHomeAdmin","type","HOME","ADMIN","isPharmacyAdmin","PHARMACY","filterBy","masterForMedium","undefined","filter","setFilter","page","fields","populate","sortBy","createdAt","find","parentId","hasOwnProperty","search","delayDebounceFn","setTimeout","fetch","clearTimeout","handleSearch","event","value","target","obj","keyword","keys","modifiedList","list","map","current","index","query","then","code","updatedList","detail","x","_id","match","params","id","catch","err","getSourceMedium","masterDetail","marginLeft","margin","color","textDecoration","backgroundColor","name"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport InfiniteScroll from 'react-infinite-scroller';\nimport { withRouter, Link } from 'react-router-dom';\nimport { masterPaginate } from '../../../services/api/routes/master';\nimport axios from '../../../services/api/config';\nimport { Search, Toast } from '../../../components/common/index';\nimport { USER_TYPE } from '../../../constants/User';\nimport { MASTER_MEDIUM } from '../../../constants/MasterMedium';\n\nconst MasterList = (props) => {\n  const { onSelect, authUser } = props\n  const [data, setData] = useState([]);\n  const isHomeAdmin = authUser && authUser.type === USER_TYPE.HOME.ADMIN\n  const isPharmacyAdmin = authUser && authUser.type === USER_TYPE.PHARMACY.ADMIN\n  let filterBy = {\n    masterForMedium: isHomeAdmin ? MASTER_MEDIUM.HOME : isPharmacyAdmin ? MASTER_MEDIUM.PHARMACY : undefined\n  }\n  const [filter, setFilter] = useState({\n    page: 1,\n    fields: [],\n    populate: [{ \"homeId\": null }, { \"pharmacyId\": null }],\n    sortBy: { createdAt: 'DESC' },\n    find: { parentId: null, ...filterBy }\n  });\n\n  useEffect(() => {\n    if (filter.hasOwnProperty('search') && filter.search['keyword']) {\n      const delayDebounceFn = setTimeout(() => {\n        fetch();\n      }, 600);\n      return () => clearTimeout(delayDebounceFn);\n    } else fetch();\n  }, [filter]);\n\n  const handleSearch = (event) => {\n    let value = event.target.value;\n    let obj = {\n      ...filter,\n      page: 1,\n      search: {\n        keyword: value,\n        keys: ['name', 'code'],\n      },\n    };\n    setFilter(obj);\n  };\n  const modifiedList = (list) => {\n    let modifiedList = list.map((current, index) => {\n      return current;\n    });\n    return modifiedList;\n  };\n\n  const fetch = () => {\n    axios({ ...masterPaginate, data: { query: { ...filter } } })\n      .then(({ data }) => {\n        if (data.code === 'OK') {\n          let updatedList = modifiedList(data.data.data);\n          let detail = updatedList.find(x => x._id === props.match.params.id)\n          if (detail)\n            onSelect(detail)\n          setData(updatedList);\n        }\n      })\n      .catch((err) => {\n\n      });\n  };\n\n  function getSourceMedium(masterDetail) {\n    return masterDetail?.masterForMedium === MASTER_MEDIUM.PHARMACY ? '(Pharmacy)' :\n      masterDetail?.masterForMedium === MASTER_MEDIUM.HOME ? '(Home)' : ''\n  }\n\n  return (\n    <>\n      <div className='master residents_container'>\n        {/* <div className='resi_person_wrap'> */}\n        <div className='resi_person_wrap masterlist-header'>\n          <h3\n            style={{\n              marginLeft: '4%'\n            }}\n          >\n            Master\n          </h3>\n          <div className='form_group' style={{ margin: '4%' }}>\n            <Search\n              allowClear={true}\n              onChange={handleSearch}\n              placeholder='Name / Code'\n            />\n          </div>\n          <div className='resi_person_wrap' style={{\n\n          }}>\n            <InfiniteScroll initialLoad={true}>\n              {data &&\n                data.map((data) => {\n                  return (\n                    <>\n                      <Link\n                        style={{ color: '#FFFFFF', textDecoration: 'none' }}\n                        to={`/sub-master/${data._id}`}\n                      >\n                        {data._id === props.match.params.id ? (\n                          <div\n                            className='resi_person opened'\n                            style={{ backgroundColor: '#609FAE' }}\n                          >\n                            <div className='person_name active'>\n                              <div className=\"full_width\">\n                                <div className='r_room'>\n                                  <h4>{data.name}{getSourceMedium(data)}</h4>\n                                </div>\n                              </div>\n                            </div>\n                          </div>\n                        ) : (\n                            <div className='resi_person' onClick={() => onSelect(data)}>\n                              <div className='person_name inactive'>\n                                <div className=\"full_width\">\n                                  <div className='r_room'>\n                                    <h4>{data.name}{getSourceMedium(data)}</h4>\n                                  </div>\n                                </div>\n                              </div>\n                            </div>\n                          )}\n                      </Link>\n                    </>\n                  );\n                })}\n            </InfiniteScroll>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default withRouter(MasterList);\n"]},"metadata":{},"sourceType":"module"}