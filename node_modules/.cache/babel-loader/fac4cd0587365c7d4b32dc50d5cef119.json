{"ast":null,"code":"var _jsxFileName = \"/home/gauravpendherkar/DemoWriti/src/containers/User/Components/AddUser/SettingForm.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { Select, Option, ErrorMsg } from \"../../../../components/common\";\nimport axios from \"../../../../services/api/services/common\";\nimport { getAll as getAllRoles } from \"../../../../services/api/routes/permission\";\nimport { Info } from '../../../../assets/images/popup';\nimport Tooltip from 'rc-tooltip';\nimport 'rc-tooltip/assets/bootstrap.css';\nimport ViewRolePermission from '../../../Permission/components/ViewRolePermission';\nimport { USER_TYPE } from '../../../../constants/User';\n\nconst Form = props => {\n  const {\n    onSave,\n    loading,\n    onCancel,\n    detail,\n    col,\n    defaultValue\n  } = props;\n  const {\n    getFieldError,\n    getFieldDecorator,\n    validateFields,\n    setFieldsValue,\n    getFieldValue,\n    setFieldValue\n  } = props.form;\n  const [roles, setRoles] = useState([]);\n  const [visible, setVisible] = useState(false);\n  const [loader, setLoader] = useState(false);\n  const edit = false;\n  let errors;\n  useEffect(() => {\n    fetchRoles();\n  }, []); // useEffect(()=>{\n  //   setFieldsValue({\"subscriptionRoleGroup\":defaultValue})\n  // },[defaultValue])\n\n  const fetchRoles = async () => {\n    var _props$authUser$homeI, _props$authUser$pharm;\n\n    setLoader(true);\n    const data = {\n      sortBy: {\n        createdAt: -1\n      },\n      find: {\n        isActive: true,\n        homeId: props.authUser.type === USER_TYPE.HOME.ADMIN ? (_props$authUser$homeI = props.authUser.homeId) === null || _props$authUser$homeI === void 0 ? void 0 : _props$authUser$homeI._id : undefined,\n        pharmacyId: props.authUser.type === USER_TYPE.PHARMACY.ADMIN ? (_props$authUser$pharm = props.authUser.pharmacyId) === null || _props$authUser$pharm === void 0 ? void 0 : _props$authUser$pharm._id : undefined\n      }\n    };\n    let res = await axios({ ...getAllRoles,\n      data: {\n        query: data\n      }\n    });\n\n    if (res) {\n      if (res.code === 'OK') {\n        setRoles(res.data.data);\n      }\n    }\n\n    setLoader(false);\n  };\n\n  const viewRole = visible => {\n    setVisible(visible);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: `form_group  ${col ? col : 'col-4'}`,\n    style: {\n      paddingLeft: 0\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form_group col-8 required\",\n    style: {\n      float: 'left'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }\n  }, \"Assign Role Permission\", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 38\n    }\n  }, \"*\")), getFieldDecorator('subscriptionRoleGroup', {\n    rules: [{\n      required: true,\n      message: `Please select`\n    }]\n  })( /*#__PURE__*/React.createElement(Select, {\n    showSearch: true,\n    placeholder: \"Select Role Permission\",\n    loading: loader,\n    filterOption: (input, option) => option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 11\n    }\n  }, roles.map(v => {\n    return /*#__PURE__*/React.createElement(Option, {\n      key: v._id,\n      value: v._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 22\n      }\n    }, v.name);\n  }))), (errors = getFieldError('subscriptionRoleGroup')) ? /*#__PURE__*/React.createElement(ErrorMsg, {\n    errors: errors,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 62\n    }\n  }) : null), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form_group col-3\",\n    style: {\n      float: 'right'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }\n  }, getFieldValue('subscriptionRoleGroup') ? /*#__PURE__*/React.createElement(Tooltip, {\n    overlay: 'View Role Permission',\n    placement: \"top\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Info, {\n    style: {\n      marginTop: '-4px',\n      cursor: 'pointer',\n      height: '20px',\n      width: '20px'\n    },\n    onClick: () => viewRole(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 15\n    }\n  })) : null)), visible ? /*#__PURE__*/React.createElement(ViewRolePermission, {\n    visible: visible,\n    id: getFieldValue('subscriptionRoleGroup'),\n    onCancel: () => viewRole(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 17\n    }\n  }) : null);\n};\n\nexport default Form;","map":{"version":3,"sources":["/home/gauravpendherkar/DemoWriti/src/containers/User/Components/AddUser/SettingForm.js"],"names":["React","useEffect","useState","Select","Option","ErrorMsg","axios","getAll","getAllRoles","Info","Tooltip","ViewRolePermission","USER_TYPE","Form","props","onSave","loading","onCancel","detail","col","defaultValue","getFieldError","getFieldDecorator","validateFields","setFieldsValue","getFieldValue","setFieldValue","form","roles","setRoles","visible","setVisible","loader","setLoader","edit","errors","fetchRoles","data","sortBy","createdAt","find","isActive","homeId","authUser","type","HOME","ADMIN","_id","undefined","pharmacyId","PHARMACY","res","query","code","viewRole","paddingLeft","float","rules","required","message","input","option","children","toLowerCase","indexOf","map","v","name","marginTop","cursor","height","width"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Select, Option, ErrorMsg } from \"../../../../components/common\";\nimport axios from \"../../../../services/api/services/common\";\nimport { getAll as getAllRoles } from \"../../../../services/api/routes/permission\";\nimport { Info } from '../../../../assets/images/popup';\nimport Tooltip from 'rc-tooltip';\nimport 'rc-tooltip/assets/bootstrap.css';\nimport ViewRolePermission from '../../../Permission/components/ViewRolePermission'\nimport { USER_TYPE } from '../../../../constants/User'\n\nconst Form = (props) => {\n  const { onSave, loading, onCancel, detail, col, defaultValue } = props\n  const { getFieldError, getFieldDecorator, validateFields, setFieldsValue, getFieldValue, setFieldValue } = props.form\n  const [roles, setRoles] = useState([])\n  const [visible, setVisible] = useState(false)\n  const [loader, setLoader] = useState(false)\n  const edit = false\n  let errors\n  \n  useEffect(() => {\n    fetchRoles()\n  }, [])\n\n  // useEffect(()=>{\n  //   setFieldsValue({\"subscriptionRoleGroup\":defaultValue})\n  // },[defaultValue])\n  const fetchRoles = async () => {\n    setLoader(true)\n    const data = {\n      sortBy: { createdAt: -1 },\n      find: {\n        isActive: true,\n        homeId: props.authUser.type === USER_TYPE.HOME.ADMIN ? props.authUser.homeId?._id : undefined,\n        pharmacyId: props.authUser.type === USER_TYPE.PHARMACY.ADMIN ? props.authUser.pharmacyId?._id : undefined,\n      }\n    }\n    let res = await axios({ ...getAllRoles, data: { query: data } })\n    if (res) {\n      if (res.code === 'OK') {\n        setRoles(res.data.data)\n      }\n    }\n    setLoader(false)\n  }\n\n  const viewRole = (visible) => {\n    setVisible(visible)\n  }\n\n  return <>\n    <div className={`form_group  ${col ? col : 'col-4'}`} style={{ paddingLeft: 0 }}>\n      <div className=\"form_group col-8 required\" style={{ float: 'left' }}>\n        <label>Assign Role Permission<span>*</span></label>\n\n        {getFieldDecorator('subscriptionRoleGroup', {\n          rules: [{\n            required: true, message: `Please select`\n          }]\n        })(\n          <Select showSearch placeholder=\"Select Role Permission\"\n            loading={loader}\n            filterOption={(input, option) =>\n              option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n            }\n          >\n            {roles.map(v => {\n              return <Option key={v._id} value={v._id} >\n                {v.name}\n              </Option>\n            })}\n          </Select>\n        )}\n        {(errors = getFieldError('subscriptionRoleGroup')) ? <ErrorMsg errors={errors} /> : null}\n      </div>\n      <div className=\"form_group col-3\" style={{ float: 'right' }}>\n        {\n          getFieldValue('subscriptionRoleGroup') ?\n            <Tooltip overlay={'View Role Permission'} placement=\"top\">\n              <Info style={{ marginTop: '-4px', cursor: 'pointer', height: '20px', width: '20px' }}\n                onClick={() => viewRole(true)} />\n            </Tooltip>\n            : null\n        }\n      </div>\n    </div>\n    {\n      visible ? <ViewRolePermission visible={visible} id={getFieldValue('subscriptionRoleGroup')}\n        onCancel={() => viewRole(false)} /> : null\n    }\n  </>\n}\n\nexport default Form"]},"metadata":{},"sourceType":"module"}