{"ast":null,"code":"var _jsxFileName = \"/home/gauravpendherkar/DemoWriti/src/components/NotesPopup/View.js\";\nimport React, { Component, useState } from \"react\";\nimport Dialog from \"../common/Popup\";\nimport { Conversation, AddNotes, Edit } from \"../../../src/assets/images/popup\";\nimport { DeleteNote, NoteUpsert } from \"./index\";\nimport { getUserNameWithDesignation } from \"../../util/common\";\nimport { displayCustomDateFormat, displayDateTime } from \"../../util/moment\";\nimport { invert } from \"lodash\";\nimport { priority } from \"../../constants/notes\";\nimport { useSelector } from \"react-redux\";\nimport _ from \"lodash\";\n\nconst ViewNote = props => {\n  var _detail$noteType;\n\n  const {\n    detail,\n    noteTypes,\n    isHistory\n  } = props; // let foundNoteType =\n  //   detail?.noteType && noteTypes.find((n) => n._id == detail.noteType);\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex ptrik-notes\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 18,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: isHistory ? \" line-through\" : \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 19,\n      columnNumber: 9\n    }\n  }, \"Created By :\", \" \", detail.addedBy && Object.keys(detail.addedBy).length ? getUserNameWithDesignation(detail.addedBy) : \"-\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: isHistory ? \" line-through\" : \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 9\n    }\n  }, \"Created At :\", \" \", detail.createdAt && Object.keys(detail.createdAt).length ? displayDateTime(detail.createdAt) : \"-\"), detail.isAlert ? /*#__PURE__*/React.createElement(\"span\", {\n    className: \"alert-tag\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 27\n    }\n  }, \"Alert\") : null, isHistory ? /*#__PURE__*/React.createElement(\"span\", {\n    className: \"pink-tag\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 22\n    }\n  }, \"Edited\") : null), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex mb-20\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }\n  }, !isHistory && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pr-lock\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 24\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"mdm-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 11\n    }\n  }, \"Associated Document\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"rx-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 11\n    }\n  }, props.xRayNumber)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pr-lock\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: isHistory ? \"mdm-text line-through\" : \"mdm-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 11\n    }\n  }, \"Type\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: isHistory ? \"ss-text line-through\" : \"ss-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 11\n    }\n  }, (_detail$noteType = detail.noteType) === null || _detail$noteType === void 0 ? void 0 : _detail$noteType.name))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: isHistory ? \"ss-text line-through\" : \"ss-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }, \"Note\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: isHistory ? \"p-desc-text line-through\" : \"p-desc-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }, detail.note || \"-\")));\n};\n\nconst ViewNotesPopup = props => {\n  var _detail$addedBy;\n\n  const {\n    detail,\n    noteTypes = [],\n    index,\n    isOnlyView\n  } = props;\n  console.log(\"ðŸš€ ~ file: View.js ~ line 62 ~ ViewNotesPopup ~ isOnlyView\", isOnlyView);\n  const authUser = useSelector(state => state.auth.authUser);\n  const [loader, setLoader] = useState(false);\n  const [visibleEdit, setVisibleEdit] = useState(false);\n  const [visibleDelete, setVisibleDelete] = useState(false);\n  const [visibleClarify, setVisibleClarify] = useState(false);\n\n  const handleEdit = visible => {\n    setVisibleEdit(visible);\n  };\n\n  const handleDelete = visible => {\n    setVisibleDelete(visible);\n  };\n\n  const handleClarify = visible => {\n    setVisibleDelete(visible);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, detail && Object.keys(detail).length > 0 ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ViewNote, Object.assign({\n    detail: detail,\n    noteTypes: noteTypes\n  }, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 11\n    }\n  })), _.map(detail.history, d => {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(ViewNote, {\n      detail: d,\n      noteTypes: noteTypes,\n      isHistory: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }\n    }));\n  }), isOnlyView && /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 26\n    }\n  }), isOnlyView ? null : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"gray-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"mdm-text mr-20\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 17\n    }\n  }, \"Actions\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex align-center cursor mr-20\",\n    onClick: () => handleEdit(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Edit, {\n    className: \"imgwd\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"small-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 19\n    }\n  }, \"Edit Note\")), (detail === null || detail === void 0 ? void 0 : (_detail$addedBy = detail.addedBy) === null || _detail$addedBy === void 0 ? void 0 : _detail$addedBy._id) === (authUser === null || authUser === void 0 ? void 0 : authUser._id) && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex align-center cursor mr-20\",\n    onClick: () => handleDelete(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(AddNotes, {\n    className: \"imgwd\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"small-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 19\n    }\n  }, \"Delete Note\"))))) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex ptrik-notes\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }\n  }, \"Data not found\"))), visibleDelete && /*#__PURE__*/React.createElement(DeleteNote, {\n    visible: visibleDelete,\n    detail: detail,\n    handleDelete: () => {\n      setVisibleDelete(false);\n      props.handleDelete();\n    },\n    onCancel: () => setVisibleDelete(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }\n  }), visibleEdit && /*#__PURE__*/React.createElement(NoteUpsert, {\n    noteTypes: props.noteTypes,\n    visible: visibleEdit,\n    isEdit: true,\n    detail: detail,\n    onCancel: () => handleEdit(false),\n    xRayNumber: props.xRayNumber,\n    handleUpdate: (id, data) => {\n      setVisibleEdit(false);\n      props.handleUpdate(id, data);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 9\n    }\n  }));\n};\n\nexport default ViewNotesPopup;","map":{"version":3,"sources":["/home/gauravpendherkar/DemoWriti/src/components/NotesPopup/View.js"],"names":["React","Component","useState","Dialog","Conversation","AddNotes","Edit","DeleteNote","NoteUpsert","getUserNameWithDesignation","displayCustomDateFormat","displayDateTime","invert","priority","useSelector","_","ViewNote","props","detail","noteTypes","isHistory","addedBy","Object","keys","length","createdAt","isAlert","xRayNumber","noteType","name","note","ViewNotesPopup","index","isOnlyView","console","log","authUser","state","auth","loader","setLoader","visibleEdit","setVisibleEdit","visibleDelete","setVisibleDelete","visibleClarify","setVisibleClarify","handleEdit","visible","handleDelete","handleClarify","map","history","d","_id","id","data","handleUpdate"],"mappings":"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","sourcesContent":["import React, { Component, useState } from \"react\";\nimport Dialog from \"../common/Popup\";\nimport { Conversation, AddNotes, Edit } from \"../../../src/assets/images/popup\";\nimport { DeleteNote, NoteUpsert } from \"./index\";\nimport { getUserNameWithDesignation } from \"../../util/common\";\nimport { displayCustomDateFormat, displayDateTime } from \"../../util/moment\";\nimport { invert } from \"lodash\";\nimport { priority } from \"../../constants/notes\";\nimport { useSelector } from \"react-redux\";\nimport _ from \"lodash\";\n\nconst ViewNote = (props) => {\n  const { detail, noteTypes ,isHistory} = props;\n  // let foundNoteType =\n  //   detail?.noteType && noteTypes.find((n) => n._id == detail.noteType);\n  return (\n    <>\n      <div className=\"d-flex ptrik-notes\" >\n        <span className={isHistory? \" line-through\":\"\"}>\n          Created By :{\" \"}\n          {detail.addedBy && Object.keys(detail.addedBy).length\n            ? getUserNameWithDesignation(detail.addedBy)\n            : \"-\"}\n        </span>\n        <span className={isHistory? \" line-through\":\"\"}>\n          Created At :{\" \"}\n          {detail.createdAt && Object.keys(detail.createdAt).length\n            ? displayDateTime(detail.createdAt)\n            : \"-\"}\n        </span>\n        {detail.isAlert ? <span className=\"alert-tag\">Alert</span> : null}\n        {isHistory ? <span className=\"pink-tag\">Edited</span> : null}\n\n      </div>\n\n      <div className=\"d-flex mb-20\">\n        {/* <div className='pr-lock'>\n              <span className='mdm-text'>Priority</span>\n              <span className='hight-text'>\n                {invert(priority)[detail.priority || 1]}\n              </span>\n            </div> */}\n       {!isHistory &&  <div className=\"pr-lock\">\n          <span className=\"mdm-text\">Associated Document</span>\n          <span className=\"rx-text\">{props.xRayNumber}</span>\n        </div>}\n        <div className=\"pr-lock\">\n          <span  className={isHistory? \"mdm-text line-through\":\"mdm-text\"}>Type</span>\n          <span  className={isHistory? \"ss-text line-through\":\"ss-text\"}>{detail.noteType?.name}</span>\n        </div>\n      </div>\n\n      <div className=\"\">\n        <span  className={isHistory? \"ss-text line-through\":\"ss-text\"}>Note</span>\n        <p className={isHistory ? \"p-desc-text line-through\" : \"p-desc-text\"}>{detail.note || \"-\"}</p>\n      </div>\n    </>\n  );\n};\nconst ViewNotesPopup = (props) => {\n  const { detail, noteTypes = [], index, isOnlyView } = props;\n  console.log(\"ðŸš€ ~ file: View.js ~ line 62 ~ ViewNotesPopup ~ isOnlyView\", isOnlyView)\n  const authUser = useSelector((state) => state.auth.authUser);\n\n  const [loader, setLoader] = useState(false);\n  const [visibleEdit, setVisibleEdit] = useState(false);\n  const [visibleDelete, setVisibleDelete] = useState(false);\n  const [visibleClarify, setVisibleClarify] = useState(false);\n  const handleEdit = (visible) => {\n    setVisibleEdit(visible);\n  };\n  const handleDelete = (visible) => {\n    setVisibleDelete(visible);\n  };\n  const handleClarify = (visible) => {\n    setVisibleDelete(visible);\n  };\n\n  return (\n    <>\n      {detail && Object.keys(detail).length > 0 ? (\n        <>\n          <ViewNote detail={detail} noteTypes={noteTypes} {...props} />\n          {_.map(detail.history, (d) => {\n            return (\n              <>\n                <hr />\n                <ViewNote detail={d} noteTypes={noteTypes} isHistory={true} />\n              </>\n            );\n          })}\n          {isOnlyView && <hr />}\n          { isOnlyView ? null : (\n            <div className=\"gray-block\">\n              <div className=\"d-flex\">\n                <span className=\"mdm-text mr-20\">Actions</span>\n                <div\n                  className=\"d-flex align-center cursor mr-20\"\n                  onClick={() => handleEdit(true)}\n                >\n                  <Edit className=\"imgwd\" />\n                  <span className=\"small-text\">Edit Note</span>\n                </div>\n                {detail?.addedBy?._id === authUser?._id &&\n                <div\n                  className=\"d-flex align-center cursor mr-20\"\n                  onClick={() => handleDelete(true)}\n                >\n                  <AddNotes className=\"imgwd\" />\n                  <span className=\"small-text\">Delete Note</span>\n                </div>}\n              </div>\n            </div>\n          )}\n        </>\n      ) : (\n        <>\n          <div className=\"d-flex ptrik-notes\">\n            <h3>Data not found</h3>\n          </div>\n        </>\n      )}\n\n      {visibleDelete && (\n        <DeleteNote\n          visible={visibleDelete}\n          detail={detail}\n          handleDelete={() => {\n            setVisibleDelete(false);\n            props.handleDelete();\n          }}\n          onCancel={() => setVisibleDelete(false)}\n        />\n      )}\n      {visibleEdit && (\n        <NoteUpsert\n          noteTypes={props.noteTypes}\n          visible={visibleEdit}\n          isEdit={true}\n          detail={detail}\n          onCancel={() => handleEdit(false)}\n          xRayNumber={props.xRayNumber}\n          handleUpdate={(id, data) => {\n            setVisibleEdit(false);\n            props.handleUpdate(id, data);\n          }}\n        />\n      )}\n    </>\n  );\n};\n\nexport default ViewNotesPopup;\n"]},"metadata":{},"sourceType":"module"}