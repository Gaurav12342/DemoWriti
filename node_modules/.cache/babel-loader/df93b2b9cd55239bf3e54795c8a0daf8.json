{"ast":null,"code":"var _jsxFileName = \"/home/gauravpendherkar/DemoWriti/src/containers/PmrTodo/components/PmrOrder.js\";\nimport React, { Component, useEffect, useState } from 'react';\nimport { displayDate, displayTime } from '../../../util/moment';\nimport { createForm } from 'rc-form';\nimport { PMR_ORDER, PMR_ORDER_LABEL, PMR_ORDER_COLOR, KROLL_ORDER_TYPE, KROLL_ORDER_STATUS } from '../../../constants/pmr';\nimport { Input, Search } from '../../../components/common/index';\nimport { Edit, Cancel } from '../../../assets/images/resident-detail/index';\nimport { isDrOrderView, isCautionAlertNotes } from '../../../util/pmr';\nimport NotesModal from '../../../components/NotesPopup/List';\nimport ReminderModal from '../../../components/ReminderPopup/List';\nimport { Notes, Reminder } from '../../../assets/images/pmr/index';\nimport { SUB_CATEGORY, TODO_CATEGORY } from '../../../constants/todo';\nimport ConfirmPopup from '../../../components/common/ConfirmPopup';\nimport PmrCautionModal from './PmrCautionModal';\nimport { isDrOrNp, getUserNameWithDesignation } from '../../../util/common';\nimport { deleteCausion } from '../../../services/api/routes/pmr';\nimport { Toast } from '../../../components/common/Toast';\nimport axios from '../../../services/api/config';\n\nconst getOrderTag = pmrOrder => {\n  // show tag only for cont, discont, hold order\n  return pmrOrder.docStatusUpdate && (PMR_ORDER.STATUS['CONTINUE'] === pmrOrder.status || PMR_ORDER.STATUS['DISCONTINUE'] === pmrOrder.status || PMR_ORDER.STATUS['HOLD'] === pmrOrder.status) ? Object.keys(PMR_ORDER.STATUS).map(st => {\n    let orderTag = {\n      class: ''\n    };\n\n    if (PMR_ORDER.STATUS[st] === pmrOrder.status) {\n      orderTag.class = PMR_ORDER_COLOR.TAG_CLASS[st];\n      return /*#__PURE__*/React.createElement(\"p\", {\n        className: `order-tag ${orderTag.class}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 11\n        }\n      }, st.replace(/_/g, ' '));\n    }\n  }) : '';\n};\n\nconst PmrOrder = props => {\n  var _pmrOrder$drug, _pmrOrder$drug2, _pmrOrder$drug3, _pmrOrder$luCode, _pmrOrder$luCode$, _pmrOrder$alertNote2, _pmrOrder$alertNote3, _pmrOrder$alertNote4, _pmrOrder$alertNote4$, _pmrOrder$alertNote5;\n\n  const {\n    detail,\n    pmrOrder,\n    isNotification,\n    query,\n    form,\n    authUser,\n    onUpdateOrder,\n    isMedTodo,\n    handleOrderRef\n  } = props;\n  const orderRef = React.useRef();\n  const {\n    resetFields\n  } = form;\n  const [notesModal, setNotesModal] = useState(false);\n  const [notesFilterOptions, setNotesFilterOptions] = useState({});\n  const [reminderFilterOptions, setReminderFilterOptions] = useState({});\n  const [reminderModal, setReminderModal] = useState(false);\n  const [visibleCausion, setVisibleCausion] = useState(false);\n  const [currentCausionData, setCurrentCausionData] = useState('');\n  const [deleteCausionModal, setDeleteCausionModal] = useState(false);\n  const [deleteBtnLoading, setDeleteBtnLoading] = useState(false);\n  const [editData, setEditData] = useState(undefined);\n\n  const visibleNotesModal = (visible, record, str, data) => {\n    setNotesModal(visible);\n    setNotesFilterOptions({});\n\n    if (data) {\n      onUpdateOrder('notesCount', {\n        orderId: pmrOrder._id,\n        data: data\n      });\n    }\n  };\n\n  const createNotesModal = () => {\n    let options = {\n      query: {\n        find: {\n          pmrOrderId: pmrOrder === null || pmrOrder === void 0 ? void 0 : pmrOrder._id,\n          category: TODO_CATEGORY.MED_REVIEW,\n          subCategory: detail === null || detail === void 0 ? void 0 : detail.subCategory\n        },\n        populate: [{\n          addedBy: []\n        }]\n      }\n    };\n    setNotesFilterOptions(options);\n    setNotesModal(true);\n  };\n\n  const visibleReminderModal = (visible, record, str, data) => {\n    setReminderModal(visible);\n    setReminderFilterOptions({});\n    if (data) onUpdateOrder('reminderCount', {\n      orderId: pmrOrder._id,\n      data: data\n    });\n  };\n\n  const createReminderModal = () => {\n    let options = {\n      query: {\n        find: {\n          pmrOrderId: pmrOrder === null || pmrOrder === void 0 ? void 0 : pmrOrder._id,\n          category: TODO_CATEGORY.MED_REVIEW,\n          subCategory: detail === null || detail === void 0 ? void 0 : detail.subCategory\n        },\n        populate: [{\n          addedBy: []\n        }]\n      }\n    };\n    setReminderFilterOptions(options);\n    setReminderModal(true);\n  };\n\n  const handleAddCausion = edit => {\n    setEditData(edit);\n    setVisibleCausion(true);\n\n    if (!edit) {\n      resetFields();\n    }\n  };\n\n  let pmrLabel = {\n    label: '',\n    color: '',\n    class: ''\n  };\n\n  if (pmrOrder.label) {\n    pmrLabel.class = pmrOrder.label === PMR_ORDER_LABEL.CHANGED ? PMR_ORDER_COLOR.TAG_CLASS.CHANGED : pmrOrder.label === PMR_ORDER_LABEL.NEW ? PMR_ORDER_COLOR.TAG_CLASS.NEW : pmrOrder.label === PMR_ORDER_LABEL.NEW_EDIT ? PMR_ORDER_COLOR.TAG_CLASS.NEW_EDIT : '';\n  }\n\n  Object.keys(PMR_ORDER_LABEL).map(label => {\n    return PMR_ORDER_LABEL[label] === pmrOrder.label ? pmrLabel.label = label.replace(/_/g, ' ') : '';\n  });\n  React.useEffect(() => {\n    if (handleOrderRef) {\n      handleOrderRef(pmrOrder._id, orderRef.current);\n    }\n  }, []);\n  const isStroke = pmrOrder.isClonedExist || pmrOrder.status === PMR_ORDER.STATUS.DISCONTINUE || pmrOrder.source === 'KROLL' && pmrOrder.docStatusUpdate === PMR_ORDER.STATUS.DISCONTINUE;\n\n  const handleDeleteCausionModal = value => {\n    setDeleteCausionModal(value);\n  };\n\n  const handleDeleteCausion = () => {\n    var _pmrOrder$alertNote;\n\n    setDeleteBtnLoading(true);\n    let {\n      method,\n      url,\n      baseURL\n    } = deleteCausion;\n    url = `${url}/${(_pmrOrder$alertNote = pmrOrder.alertNote) === null || _pmrOrder$alertNote === void 0 ? void 0 : _pmrOrder$alertNote._id}`;\n    let obj = {\n      isDeleted: false\n    };\n    axios({\n      method,\n      url,\n      baseURL,\n      data: obj\n    }).then(response => {\n      if ((response === null || response === void 0 ? void 0 : response.data.code) == 'OK') {\n        handleUpdateAlert(response.data.data);\n        setDeleteBtnLoading(false);\n        handleDeleteCausionModal(false);\n        Toast.success(response.data.message);\n      } else {\n        setDeleteBtnLoading(false);\n        Toast.error(response.data.message);\n      }\n    }).catch(error => {\n      setDeleteBtnLoading(false);\n    });\n  };\n\n  const handleUpdateAlert = orderData => {\n    if (!orderData.isAlert) orderData = null;\n    onUpdateOrder('alertNote', {\n      orderId: pmrOrder._id,\n      data: orderData\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: orderRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 5\n    }\n  }, pmrOrder.krollOrderType === KROLL_ORDER_TYPE.PMR ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: `inner-res-block d-flex ${isStroke ? 'line-through' : ''}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"resident-desc-box w-d-50\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 15\n    }\n  }, \"Order\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"sub\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 15\n    }\n  }, (_pmrOrder$drug = pmrOrder.drug) === null || _pmrOrder$drug === void 0 ? void 0 : _pmrOrder$drug.name, \" \", (_pmrOrder$drug2 = pmrOrder.drug) === null || _pmrOrder$drug2 === void 0 ? void 0 : _pmrOrder$drug2.strength, pmrOrder.krollOrderStatus === KROLL_ORDER_STATUS.SUSPENDED ? /*#__PURE__*/React.createElement(\"p\", {\n    className: `order-tag ${PMR_ORDER_COLOR.TAG_CLASS.SUSPENDED}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 19\n    }\n  }, \"Suspended\") : null, pmrLabel.label ? /*#__PURE__*/React.createElement(\"p\", {\n    className: `order-tag ${pmrLabel.class}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 19\n    }\n  }, pmrLabel.label) : null)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"resident-desc-box w-d-25\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 15\n    }\n  }, \"Rx No\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"sub\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 15\n    }\n  }, ' ', pmrOrder.krollRxNo || pmrOrder.orderNumber)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"resident-desc-box w-d-25\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 15\n    }\n  }, \"DIN\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"sub\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 15\n    }\n  }, pmrOrder.din || 'NA'))), /*#__PURE__*/React.createElement(\"div\", {\n    className: `inner-res-block d-flex ${isStroke ? 'line-through' : ''}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"resident-desc-box w-d-50\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 15\n    }\n  }, \"Equiv. to\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"sub\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 15\n    }\n  }, ((_pmrOrder$drug3 = pmrOrder.drug) === null || _pmrOrder$drug3 === void 0 ? void 0 : _pmrOrder$drug3.equivTo) || 'NA')), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"resident-desc-box w-d-25\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 15\n    }\n  }, \"Last Fill\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"sub\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 15\n    }\n  }, pmrOrder.lastFillDate && pmrOrder.krollStatus !== 'RxStatus_Unfill' ? displayDate(pmrOrder.lastFillDate) : ' NA ')), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"resident-desc-box w-d-25\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 13\n    }\n  }, pmrOrder.source === 'KROLL' ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 19\n    }\n  }, \"Exp\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"sub\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 19\n    }\n  }, ' ', ((_pmrOrder$luCode = pmrOrder.luCode) === null || _pmrOrder$luCode === void 0 ? void 0 : (_pmrOrder$luCode$ = _pmrOrder$luCode[0]) === null || _pmrOrder$luCode$ === void 0 ? void 0 : _pmrOrder$luCode$.expiryDateString) || 'NA')) : null)), /*#__PURE__*/React.createElement(\"div\", {\n    className: `inner-res-block d-flex ${isStroke ? 'line-through' : ''}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"resident-desc-box w-d-50\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 15\n    }\n  }, \"Source\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"sub\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 15\n    }\n  }, pmrOrder.source)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"resident-desc-box w-d-25\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 13\n    }\n  }, pmrOrder.source === 'KROLL' ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 19\n    }\n  }, \"LU code\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"sub\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 19\n    }\n  }, pmrOrder.luCode ? pmrOrder.luCode.reasonForUseId == 0 ? 'Does not qualify' : pmrOrder.luCode.reasonForUseId == -1 ? 'N/A' : pmrOrder.luCode.reasonForUseId || \"NA\" : \"NA\")) : null), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"resident-desc-box w-d-25\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 15\n    }\n  }, \"Indication\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"sub\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 15\n    }\n  }, pmrOrder.indication || '-'))), /*#__PURE__*/React.createElement(\"div\", {\n    className: `inner-res-block d-flex ${isStroke ? 'line-through' : ''}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"resident-desc-box w-d-50\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 15\n    }\n  }, \"Direction\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"sub\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 15\n    }\n  }, pmrOrder.sig || pmrOrder.direction)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"resident-desc-box w-d-25\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"resident-desc-box w-d-25\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"sub\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 15\n    }\n  }))), isDrOrderView(detail.subCategory, authUser) ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inner-res-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"resident-desc-box w-d-50\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 15\n    }\n  }, pmrOrder.holdUntil ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 21\n    }\n  }, \"Hold Until\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"sub\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 21\n    }\n  }, displayDate(pmrOrder.holdUntil))) : null), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"resident-desc-box w-d-25\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"resident-desc-box w-d-25\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"sub\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 17\n    }\n  }, isDrOrNp(authUser) || query.subCategory === SUB_CATEGORY.MED_REVIEW.PMR ? getOrderTag(pmrOrder) : null))) : null, /*#__PURE__*/React.createElement(\"div\", {\n    className: `inner-res-block d-flex ${isStroke ? 'line-through' : ''}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"resident-desc-box d-f-e w-d-50\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 15\n    }\n  }, !isNotification && !isMedTodo && query.subCategory && !pmrOrder.alertNote && isCautionAlertNotes(detail, query.subCategory) ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"green-bg mr-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: require('../../NursePrep/img/plus.svg'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"add-causion\",\n    onClick: () => {\n      handleAddCausion();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 23\n    }\n  }, \"Add Caution\")) : null)), !isNotification && !isMedTodo ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"resident-desc-box d-f-e w-d-25\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    className: \"p-relative align-item-center\",\n    onClick: () => {\n      createReminderModal();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Reminder, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 21\n    }\n  }), pmrOrder.reminderCount ? /*#__PURE__*/React.createElement(\"p\", {\n    className: \"note-numb reminder-numb\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 23\n    }\n  }, pmrOrder.reminderCount) : null, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"reminder-info m-l-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 21\n    }\n  }, \"Reminder \"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"resident-desc-box d-f-e w-d-25\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 362,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-relative align-item-center\",\n    style: {\n      cursor: 'pointer'\n    },\n    onClick: () => {\n      createNotesModal();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 363,\n      columnNumber: 19\n    }\n  }, pmrOrder.notesCount ? /*#__PURE__*/React.createElement(\"p\", {\n    className: \"note-numb\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 44\n    }\n  }, pmrOrder.notesCount) : null, /*#__PURE__*/React.createElement(\"img\", {\n    src: require(\"../../NursePrep/img/notes.svg\"),\n    className: \"mr-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"reminder-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 368,\n      columnNumber: 21\n    }\n  }, \"Notes \")))) : null), pmrOrder.alertNote ? /*#__PURE__*/React.createElement(\"div\", {\n    className: `inner-res-block d-flex ${isStroke ? 'line-through' : ''}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 376,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"resident-desc-box d-f-e w-d-50\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 381,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"cusion-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 17\n    }\n  }, \"Caution: \", (_pmrOrder$alertNote2 = pmrOrder.alertNote) === null || _pmrOrder$alertNote2 === void 0 ? void 0 : _pmrOrder$alertNote2.alertText)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"resident-desc-box d-f-e w-d-25\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 386,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"cusion-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 17\n    }\n  }, ((_pmrOrder$alertNote3 = pmrOrder.alertNote) === null || _pmrOrder$alertNote3 === void 0 ? void 0 : _pmrOrder$alertNote3.addedBy) ? getUserNameWithDesignation(pmrOrder.alertNote.addedBy) : '')), !isMedTodo && !isNotification && (authUser === null || authUser === void 0 ? void 0 : authUser._id) === ((_pmrOrder$alertNote4 = pmrOrder.alertNote) === null || _pmrOrder$alertNote4 === void 0 ? void 0 : (_pmrOrder$alertNote4$ = _pmrOrder$alertNote4.addedBy) === null || _pmrOrder$alertNote4$ === void 0 ? void 0 : _pmrOrder$alertNote4$._id) ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"resident-desc-box d-f-e w-d-25\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 393,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      cursor: 'pointer',\n      marginRight: '10%'\n    },\n    onClick: () => {\n      handleAddCausion(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Edit, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 400,\n      columnNumber: 23\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      cursor: 'pointer'\n    },\n    onClick: () => {\n      handleDeleteCausionModal(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 402,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Cancel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 408,\n      columnNumber: 23\n    }\n  })))) : null) : null) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: `inner-res-block d-flex ${isStroke ? 'line-through' : ''}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 419,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"resident-desc-box w-d-50\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 424,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"sub\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 425,\n      columnNumber: 17\n    }\n  }, pmrOrder.description, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 427,\n      columnNumber: 19\n    }\n  }, ' ', pmrLabel.label ? /*#__PURE__*/React.createElement(\"p\", {\n    className: `order-tag ${pmrLabel.class}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 430,\n      columnNumber: 23\n    }\n  }, pmrLabel.label) : null)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: `inner-res-block d-flex ${isStroke ? 'line-through' : ''}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 438,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"resident-desc-box d-f-e w-d-50\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 443,\n      columnNumber: 15\n    }\n  }, isDrOrderView(detail.subCategory, authUser) ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inner-res-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 445,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"resident-desc-box w-d-50\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 446,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"resident-desc-box w-d-25\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 447,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"resident-desc-box w-d-25\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 448,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"sub\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 449,\n      columnNumber: 23\n    }\n  }, isDrOrNp(authUser) || query.subCategory === SUB_CATEGORY.MED_REVIEW.PMR ? getOrderTag(pmrOrder) : null))) : null), !isNotification && !isMedTodo ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"resident-desc-box d-f-e w-d-25\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 462,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    className: \"p-relative align-item-center\",\n    onClick: () => {\n      createReminderModal();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 463,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(Reminder, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 468,\n      columnNumber: 25\n    }\n  }), pmrOrder.reminderCount ? /*#__PURE__*/React.createElement(\"p\", {\n    className: \"note-numb reminder-numb\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 470,\n      columnNumber: 27\n    }\n  }, pmrOrder.reminderCount) : null, \" \", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"reminder-info m-l-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 471,\n      columnNumber: 35\n    }\n  }, \"Reminder \"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"resident-desc-box d-f-e w-d-25\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 474,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex align-center\",\n    style: {\n      cursor: 'pointer'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 475,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-relative align-item-center\",\n    style: {\n      cursor: 'pointer'\n    },\n    onClick: () => {\n      createNotesModal();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 476,\n      columnNumber: 25\n    }\n  }, pmrOrder.notesCount ? /*#__PURE__*/React.createElement(\"p\", {\n    className: \"note-numb\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 479,\n      columnNumber: 50\n    }\n  }, pmrOrder.notesCount) : null, /*#__PURE__*/React.createElement(\"img\", {\n    src: require(\"../../NursePrep/img/notes.svg\"),\n    className: \"mr-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 480,\n      columnNumber: 27\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"reminder-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 481,\n      columnNumber: 27\n    }\n  }, \"Notes \"))))) : null)), pmrOrder.isClonedExist && /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 492,\n      columnNumber: 34\n    }\n  }), notesModal && /*#__PURE__*/React.createElement(NotesModal, {\n    visible: notesModal,\n    filterOptions: notesFilterOptions,\n    onCancel: data => visibleNotesModal(false, null, 'cancel', data),\n    onOk: () => visibleNotesModal(false),\n    isUpsertList: true,\n    modalTitle: `View Note - ${detail.pmrId}`,\n    xRayNumber: pmrOrder.orderNumber,\n    addData: {\n      residentId: detail === null || detail === void 0 ? void 0 : detail.patientId._id,\n      pmrOrderId: pmrOrder === null || pmrOrder === void 0 ? void 0 : pmrOrder._id,\n      category: TODO_CATEGORY.MED_REVIEW,\n      subCategory: detail === null || detail === void 0 ? void 0 : detail.subCategory\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 496,\n      columnNumber: 11\n    }\n  }), reminderModal && /*#__PURE__*/React.createElement(ReminderModal, {\n    visible: reminderModal,\n    filterOptions: reminderFilterOptions,\n    onCancel: data => visibleReminderModal(false, null, 'cancel', data),\n    onOk: () => visibleReminderModal(false),\n    isUpsertList: true,\n    modalTitle: `View Reminder - ${detail.pmrId}`,\n    xRayNumber: pmrOrder.orderNumber,\n    addData: {\n      residentId: detail === null || detail === void 0 ? void 0 : detail.patientId._id,\n      pmrOrderId: pmrOrder === null || pmrOrder === void 0 ? void 0 : pmrOrder._id,\n      category: TODO_CATEGORY.MED_REVIEW,\n      subCategory: detail === null || detail === void 0 ? void 0 : detail.subCategory\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 516,\n      columnNumber: 11\n    }\n  }), visibleCausion && /*#__PURE__*/React.createElement(PmrCautionModal, {\n    title: editData ? 'Update causion' : 'Add causion',\n    form: form,\n    okText: editData ? 'Update' : 'Add',\n    onCancel: (propsData, closeModal) => {\n      handleUpdateAlert(propsData);\n      setVisibleCausion(closeModal);\n    },\n    visible: visibleCausion,\n    pmrOrder: pmrOrder,\n    editData: editData // onPmrOrderId={pmrOrder?._id}\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 536,\n      columnNumber: 11\n    }\n  }), deleteCausionModal && /*#__PURE__*/React.createElement(ConfirmPopup // value={pmrOrder}\n  , {\n    visible: deleteCausionModal,\n    title: `Delete Caution Note`,\n    description: `Are you want to delete this note ${(_pmrOrder$alertNote5 = pmrOrder.alertNote) === null || _pmrOrder$alertNote5 === void 0 ? void 0 : _pmrOrder$alertNote5.alertText} ?`,\n    onOk: () => {\n      handleDeleteCausion();\n    },\n    okText: \"Yes\",\n    cancelText: \"Cancel\" // loading={deleteBtnLoading}\n    ,\n    okButtonProps: {\n      loading: deleteBtnLoading\n    },\n    onClose: () => {\n      handleDeleteCausionModal(false);\n    },\n    onCancel: () => {\n      handleDeleteCausionModal(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 554,\n      columnNumber: 11\n    }\n  }));\n};\n\nexport default createForm()(PmrOrder);","map":{"version":3,"sources":["/home/gauravpendherkar/DemoWriti/src/containers/PmrTodo/components/PmrOrder.js"],"names":["React","Component","useEffect","useState","displayDate","displayTime","createForm","PMR_ORDER","PMR_ORDER_LABEL","PMR_ORDER_COLOR","KROLL_ORDER_TYPE","KROLL_ORDER_STATUS","Input","Search","Edit","Cancel","isDrOrderView","isCautionAlertNotes","NotesModal","ReminderModal","Notes","Reminder","SUB_CATEGORY","TODO_CATEGORY","ConfirmPopup","PmrCautionModal","isDrOrNp","getUserNameWithDesignation","deleteCausion","Toast","axios","getOrderTag","pmrOrder","docStatusUpdate","STATUS","status","Object","keys","map","st","orderTag","class","TAG_CLASS","replace","PmrOrder","props","detail","isNotification","query","form","authUser","onUpdateOrder","isMedTodo","handleOrderRef","orderRef","useRef","resetFields","notesModal","setNotesModal","notesFilterOptions","setNotesFilterOptions","reminderFilterOptions","setReminderFilterOptions","reminderModal","setReminderModal","visibleCausion","setVisibleCausion","currentCausionData","setCurrentCausionData","deleteCausionModal","setDeleteCausionModal","deleteBtnLoading","setDeleteBtnLoading","editData","setEditData","undefined","visibleNotesModal","visible","record","str","data","orderId","_id","createNotesModal","options","find","pmrOrderId","category","MED_REVIEW","subCategory","populate","addedBy","visibleReminderModal","createReminderModal","handleAddCausion","edit","pmrLabel","label","color","CHANGED","NEW","NEW_EDIT","current","isStroke","isClonedExist","DISCONTINUE","source","handleDeleteCausionModal","value","handleDeleteCausion","method","url","baseURL","alertNote","obj","isDeleted","then","response","code","handleUpdateAlert","success","message","error","catch","orderData","isAlert","krollOrderType","PMR","drug","name","strength","krollOrderStatus","SUSPENDED","krollRxNo","orderNumber","din","equivTo","lastFillDate","krollStatus","luCode","expiryDateString","reasonForUseId","indication","sig","direction","holdUntil","require","reminderCount","cursor","notesCount","alertText","marginRight","description","pmrId","residentId","patientId","propsData","closeModal","loading"],"mappings":"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","sourcesContent":["import React, { Component, useEffect, useState } from 'react';\nimport { displayDate, displayTime } from '../../../util/moment';\nimport { createForm } from 'rc-form';\nimport {\n  PMR_ORDER,\n  PMR_ORDER_LABEL,\n  PMR_ORDER_COLOR,\n  KROLL_ORDER_TYPE,\n  KROLL_ORDER_STATUS\n} from '../../../constants/pmr';\nimport { Input, Search } from '../../../components/common/index';\nimport { Edit, Cancel } from '../../../assets/images/resident-detail/index';\nimport { isDrOrderView, isCautionAlertNotes } from '../../../util/pmr';\nimport NotesModal from '../../../components/NotesPopup/List';\nimport ReminderModal from '../../../components/ReminderPopup/List';\nimport { Notes, Reminder } from '../../../assets/images/pmr/index';\nimport { SUB_CATEGORY, TODO_CATEGORY } from '../../../constants/todo';\nimport ConfirmPopup from '../../../components/common/ConfirmPopup';\nimport PmrCautionModal from './PmrCautionModal';\nimport { isDrOrNp, getUserNameWithDesignation } from '../../../util/common';\nimport { deleteCausion } from '../../../services/api/routes/pmr';\nimport { Toast } from '../../../components/common/Toast';\nimport axios from '../../../services/api/config';\n\nconst getOrderTag = (pmrOrder) => {\n  // show tag only for cont, discont, hold order\n\n  return pmrOrder.docStatusUpdate &&\n    (PMR_ORDER.STATUS['CONTINUE'] === pmrOrder.status ||\n      PMR_ORDER.STATUS['DISCONTINUE'] === pmrOrder.status ||\n      PMR_ORDER.STATUS['HOLD'] === pmrOrder.status)\n    ? Object.keys(PMR_ORDER.STATUS).map((st) => {\n      let orderTag = { class: '' };\n      if (PMR_ORDER.STATUS[st] === pmrOrder.status) {\n        orderTag.class = PMR_ORDER_COLOR.TAG_CLASS[st];\n        return (\n          <p className={`order-tag ${orderTag.class}`}>\n            {st.replace(/_/g, ' ')}\n          </p>\n        );\n      }\n    })\n    : '';\n};\n\nconst PmrOrder = (props) => {\n  const {\n    detail,\n    pmrOrder,\n    isNotification,\n    query,\n    form,\n    authUser,\n    onUpdateOrder,\n    isMedTodo,\n    handleOrderRef\n  } = props;\n\n  const orderRef = React.useRef();\n  const { resetFields } = form;\n  const [notesModal, setNotesModal] = useState(false);\n  const [notesFilterOptions, setNotesFilterOptions] = useState({});\n  const [reminderFilterOptions, setReminderFilterOptions] = useState({});\n  const [reminderModal, setReminderModal] = useState(false);\n  const [visibleCausion, setVisibleCausion] = useState(false);\n  const [currentCausionData, setCurrentCausionData] = useState('');\n  const [deleteCausionModal, setDeleteCausionModal] = useState(false);\n  const [deleteBtnLoading, setDeleteBtnLoading] = useState(false);\n  const [editData, setEditData] = useState(undefined);\n\n  const visibleNotesModal = (visible, record, str, data) => {\n    setNotesModal(visible);\n    setNotesFilterOptions({});\n    if (data) {\n      onUpdateOrder('notesCount', { orderId: pmrOrder._id, data: data });\n    }\n  };\n\n  const createNotesModal = () => {\n    let options = {\n      query: {\n        find: {\n          pmrOrderId: pmrOrder?._id,\n          category: TODO_CATEGORY.MED_REVIEW,\n          subCategory: detail?.subCategory,\n        },\n        populate: [{ addedBy: [] }],\n      },\n    };\n    setNotesFilterOptions(options);\n    setNotesModal(true);\n  };\n\n  const visibleReminderModal = (visible, record, str, data) => {\n    setReminderModal(visible);\n    setReminderFilterOptions({});\n    if (data)\n      onUpdateOrder('reminderCount', { orderId: pmrOrder._id, data: data });\n  };\n\n  const createReminderModal = () => {\n    let options = {\n      query: {\n        find: {\n          pmrOrderId: pmrOrder?._id,\n          category: TODO_CATEGORY.MED_REVIEW,\n          subCategory: detail?.subCategory,\n        },\n        populate: [{ addedBy: [] }],\n      },\n    };\n    setReminderFilterOptions(options);\n    setReminderModal(true);\n  };\n\n  const handleAddCausion = (edit) => {\n    setEditData(edit);\n    setVisibleCausion(true);\n    if (!edit) {\n      resetFields();\n    }\n  };\n\n  let pmrLabel = { label: '', color: '', class: '' };\n  if (pmrOrder.label) {\n    pmrLabel.class =\n      pmrOrder.label === PMR_ORDER_LABEL.CHANGED\n        ? PMR_ORDER_COLOR.TAG_CLASS.CHANGED\n        : pmrOrder.label === PMR_ORDER_LABEL.NEW\n          ? PMR_ORDER_COLOR.TAG_CLASS.NEW\n          : pmrOrder.label === PMR_ORDER_LABEL.NEW_EDIT\n            ? PMR_ORDER_COLOR.TAG_CLASS.NEW_EDIT\n            : '';\n  }\n\n  Object.keys(PMR_ORDER_LABEL).map((label) => {\n    return PMR_ORDER_LABEL[label] === pmrOrder.label\n      ? (pmrLabel.label = label.replace(/_/g, ' '))\n      : '';\n  });\n\n  React.useEffect(() => {\n    if (handleOrderRef) {\n      handleOrderRef(pmrOrder._id, orderRef.current);\n    }\n  }, [])\n\n  const isStroke =\n    pmrOrder.isClonedExist ||\n    pmrOrder.status === PMR_ORDER.STATUS.DISCONTINUE ||\n    (pmrOrder.source === 'KROLL' &&\n      pmrOrder.docStatusUpdate === PMR_ORDER.STATUS.DISCONTINUE);\n\n  const handleDeleteCausionModal = (value) => {\n    setDeleteCausionModal(value);\n  };\n\n  const handleDeleteCausion = () => {\n    setDeleteBtnLoading(true);\n    let { method, url, baseURL } = deleteCausion;\n    url = `${url}/${pmrOrder.alertNote?._id}`;\n    let obj = {\n      isDeleted: false,\n    };\n    axios({ method, url, baseURL, data: obj })\n      .then((response) => {\n        if (response?.data.code == 'OK') {\n          handleUpdateAlert(response.data.data)\n          setDeleteBtnLoading(false);\n          handleDeleteCausionModal(false);\n          Toast.success(response.data.message);\n        } else {\n          setDeleteBtnLoading(false);\n          Toast.error(response.data.message);\n        }\n      })\n      .catch((error) => {\n        setDeleteBtnLoading(false);\n      });\n  };\n\n  const handleUpdateAlert = (orderData) => {\n    if (!orderData.isAlert) orderData = null;\n    onUpdateOrder('alertNote', { orderId: pmrOrder._id, data: orderData });\n  };\n\n  return (\n    <div ref={orderRef}>\n      {pmrOrder.krollOrderType === KROLL_ORDER_TYPE.PMR ? (\n        <>\n          <div\n            className={`inner-res-block d-flex ${\n              isStroke ? 'line-through' : ''\n              }`}\n          >\n            <div className='resident-desc-box w-d-50'>\n              <span className='main'>Order</span>\n              <span className='sub'>\n                {pmrOrder.drug?.name}{\" \"}{pmrOrder.drug?.strength}\n                {pmrOrder.krollOrderStatus === KROLL_ORDER_STATUS.SUSPENDED ? (\n                  <p className={`order-tag ${PMR_ORDER_COLOR.TAG_CLASS.SUSPENDED}`}>\n                    Suspended\n                  </p>\n                ) : null}\n                {pmrLabel.label ? (\n                  <p className={`order-tag ${pmrLabel.class}`}>\n                    {pmrLabel.label}\n                  </p>\n                ) : null}\n              </span>\n            </div>\n            <div className='resident-desc-box w-d-25'>\n              <span className='main'>Rx No</span>\n              <span className='sub'>\n                {' '}\n                {pmrOrder.krollRxNo || pmrOrder.orderNumber}\n              </span>\n            </div>\n            <div className='resident-desc-box w-d-25'>\n              <span className='main'>DIN</span>\n              <span className='sub'>{pmrOrder.din || 'NA'}</span>\n            </div>\n          </div>\n          <div\n            className={`inner-res-block d-flex ${\n              isStroke ? 'line-through' : ''\n              }`}\n          >\n            <div className='resident-desc-box w-d-50'>\n              <span className='main'>Equiv. to</span>\n              <span className='sub'>{pmrOrder.drug?.equivTo || 'NA'}</span>\n            </div>\n            <div className='resident-desc-box w-d-25'>\n              <span className='main'>Last Fill</span>\n              <span className='sub'>\n                {pmrOrder.lastFillDate &&\n                  pmrOrder.krollStatus !== 'RxStatus_Unfill'\n                  ? displayDate(pmrOrder.lastFillDate)\n                  : ' NA '}\n              </span>\n            </div>\n            <div className='resident-desc-box w-d-25'>\n              {\n                pmrOrder.source === 'KROLL' ? <>\n                  <span className='main'>Exp</span>\n                  <span className='sub'>\n                    {' '}\n                    {pmrOrder.luCode?.[0]?.expiryDateString || 'NA'}\n                  </span>\n                </> : null\n              }\n            </div>\n          </div>\n          <div\n            className={`inner-res-block d-flex ${\n              isStroke ? 'line-through' : ''\n              }`}\n          >\n            <div className='resident-desc-box w-d-50'>\n              <span className='main'>Source</span>\n              <span className='sub'>{pmrOrder.source}</span>\n            </div>\n            <div className='resident-desc-box w-d-25'>\n              {\n                pmrOrder.source === 'KROLL' ? <>\n                  <span className='main'>LU code</span>\n                  <span className='sub'>\n                    {pmrOrder.luCode ?\n                      pmrOrder.luCode.reasonForUseId == 0 ? 'Does not qualify'\n                        : pmrOrder.luCode.reasonForUseId == -1 ? 'N/A'\n                          : pmrOrder.luCode.reasonForUseId || \"NA\"\n                      : \"NA\"}\n                  </span>\n                </> : null}\n            </div>\n            <div className='resident-desc-box w-d-25'>\n              <span className='main'>Indication</span>\n              <span className='sub'>{pmrOrder.indication || '-'}</span>\n            </div>\n          </div>\n          <div\n            className={`inner-res-block d-flex ${\n              isStroke ? 'line-through' : ''\n              }`}\n          >\n            <div className='resident-desc-box w-d-50'>\n              <span className='main'>Direction</span>\n              <span className='sub'>{pmrOrder.sig || pmrOrder.direction}</span>\n            </div>\n            <div className='resident-desc-box w-d-25'>\n              {/* <span className=\"main\">Order Type</span>\n                    <span className=\"sub\">NA</span> */}\n            </div>\n            <div className='resident-desc-box w-d-25'>\n              <span className='main'></span>\n              <span className='sub'></span>\n            </div>\n          </div>\n          {isDrOrderView(detail.subCategory, authUser) ? (\n            <div className='inner-res-block'>\n              <div className='resident-desc-box w-d-50'>\n                {pmrOrder.holdUntil ?\n                  <>\n                    <span className='main'>Hold Until</span>\n                    <span className='sub'>{displayDate(pmrOrder.holdUntil)}</span>\n                  </> : null\n                }\n              </div>\n              <div className='resident-desc-box w-d-25'></div>\n              <div className='resident-desc-box w-d-25'>\n                <span className='sub'>\n                  {isDrOrNp(authUser) ||\n                    query.subCategory === SUB_CATEGORY.MED_REVIEW.PMR\n                    ? getOrderTag(pmrOrder)\n                    : null}\n                </span>\n              </div>\n            </div>\n          ) : null}\n          <div\n            className={`inner-res-block d-flex ${\n              isStroke ? 'line-through' : ''\n              }`}\n          >\n            <div className='resident-desc-box d-f-e w-d-50'>\n              <div className='flex-block'>\n                {!isNotification && !isMedTodo &&\n                  query.subCategory &&\n                  !pmrOrder.alertNote &&\n                  isCautionAlertNotes(detail, query.subCategory) ? (\n                    <>\n                      <p className='green-bg mr-5'>\n                        <img src={require('../../NursePrep/img/plus.svg')} />\n                      </p>\n                      <span\n                        className='add-causion'\n                        onClick={() => {\n                          handleAddCausion();\n                        }}\n                      >\n                        Add Caution\n                  </span>\n                    </>\n                  ) : null}\n              </div>\n            </div>\n            {\n              (!isNotification && !isMedTodo) ? <>\n                <div className='resident-desc-box d-f-e w-d-25'>\n                  <a className='p-relative align-item-center'\n                    onClick={() => {\n                      createReminderModal();\n                    }}\n                  >\n                    <Reminder />\n                    {pmrOrder.reminderCount ? (\n                      <p className=\"note-numb reminder-numb\">{pmrOrder.reminderCount}</p>\n                    ) : null}\n                    <span className='reminder-info m-l-5'>Reminder </span>\n                  </a>\n                </div>\n                <div className='resident-desc-box d-f-e w-d-25'>\n                  <div className=\"p-relative align-item-center\"\n                    style={{ cursor: 'pointer' }}\n                    onClick={() => { createNotesModal(); }}>\n                    {pmrOrder.notesCount ? <p className=\"note-numb\">{pmrOrder.notesCount}</p> : null}\n                    <img src={require(\"../../NursePrep/img/notes.svg\")} className=\"mr-5\" />\n                    <span className=\"reminder-info\">Notes </span>\n                  </div>\n                </div>\n\n              </> : null\n            }\n          </div>\n          {pmrOrder.alertNote ?\n            <div\n              className={`inner-res-block d-flex ${\n                isStroke ? 'line-through' : ''\n                }`}\n            >\n              <div className='resident-desc-box d-f-e w-d-50'>\n                <span className='cusion-info'>\n                  Caution: {pmrOrder.alertNote?.alertText}\n                </span>\n              </div>\n              <div className='resident-desc-box d-f-e w-d-25'>\n                <span className='cusion-info'>\n                  {pmrOrder.alertNote?.addedBy ? getUserNameWithDesignation(pmrOrder.alertNote.addedBy) : ''}\n                </span>\n              </div>\n              {!isMedTodo && !isNotification &&\n                authUser?._id === pmrOrder.alertNote?.addedBy?._id ? <>\n                  <div className='resident-desc-box d-f-e w-d-25'>\n                    <div\n                      style={{ cursor: 'pointer', marginRight: '10%' }}\n                      onClick={() => {\n                        handleAddCausion(true);\n                      }}\n                    >\n                      <Edit />\n                    </div>\n                    <div\n                      style={{ cursor: 'pointer' }}\n                      onClick={() => {\n                        handleDeleteCausionModal(true);\n                      }}\n                    >\n                      <Cancel />\n                    </div>\n                  </div>\n                </>\n                : null\n              }\n            </div>\n            : null}\n        </>\n      ) : (\n          <>\n            <div\n              className={`inner-res-block d-flex ${\n                isStroke ? 'line-through' : ''\n                }`}\n            >\n              <div className='resident-desc-box w-d-50'>\n                <span className='sub'>\n                  {pmrOrder.description}\n                  <span>\n                    {' '}\n                    {pmrLabel.label ? (\n                      <p className={`order-tag ${pmrLabel.class}`}>\n                        {pmrLabel.label}\n                      </p>\n                    ) : null}\n                  </span>\n                </span>\n              </div>\n            </div>\n            <div\n              className={`inner-res-block d-flex ${\n                isStroke ? 'line-through' : ''\n                }`}\n            >\n              <div className='resident-desc-box d-f-e w-d-50'>\n                {isDrOrderView(detail.subCategory, authUser) ? (\n                  <div className='inner-res-block'>\n                    <div className='resident-desc-box w-d-50'></div>\n                    <div className='resident-desc-box w-d-25'></div>\n                    <div className='resident-desc-box w-d-25'>\n                      <span className='sub'>\n                        {isDrOrNp(authUser) ||\n                          query.subCategory === SUB_CATEGORY.MED_REVIEW.PMR\n                          ? getOrderTag(pmrOrder)\n                          : null}\n                      </span>\n                    </div>\n                  </div>\n                ) : null}\n              </div>\n              {\n                (!isNotification && !isMedTodo) ?\n                  <>\n                    <div className='resident-desc-box d-f-e w-d-25'>\n                      <a className='p-relative align-item-center'\n                        onClick={() => {\n                          createReminderModal();\n                        }}\n                      >\n                        <Reminder />\n                        {pmrOrder.reminderCount ? (\n                          <p className=\"note-numb reminder-numb\">{pmrOrder.reminderCount}</p>\n                        ) : null} <span className='reminder-info m-l-5'>Reminder </span>\n                      </a>\n                    </div>\n                    <div className='resident-desc-box d-f-e w-d-25'>\n                      <div className='d-flex align-center' style={{ cursor: 'pointer' }}>\n                        <div className=\"p-relative align-item-center\"\n                          style={{ cursor: 'pointer' }}\n                          onClick={() => { createNotesModal(); }}>\n                          {pmrOrder.notesCount ? <p className=\"note-numb\">{pmrOrder.notesCount}</p> : null}\n                          <img src={require(\"../../NursePrep/img/notes.svg\")} className=\"mr-5\" />\n                          <span className=\"reminder-info\">Notes </span>\n                        </div>\n                      </div>\n                    </div>\n                  </>\n                  : null\n              }\n            </div>\n          </>\n        )\n      }\n      {pmrOrder.isClonedExist && <hr></hr>}\n\n      {\n        notesModal && (\n          <NotesModal\n            visible={notesModal}\n            filterOptions={notesFilterOptions}\n            onCancel={(data) => visibleNotesModal(false, null, 'cancel', data)}\n            onOk={() => visibleNotesModal(false)}\n            isUpsertList={true}\n            modalTitle={`View Note - ${detail.pmrId}`}\n            xRayNumber={pmrOrder.orderNumber}\n            addData={{\n              residentId: detail?.patientId._id,\n              pmrOrderId: pmrOrder?._id,\n              category: TODO_CATEGORY.MED_REVIEW,\n              subCategory: detail?.subCategory,\n            }}\n          />\n        )\n      }\n\n      {\n        reminderModal && (\n          <ReminderModal\n            visible={reminderModal}\n            filterOptions={reminderFilterOptions}\n            onCancel={(data) => visibleReminderModal(false, null, 'cancel', data)}\n            onOk={() => visibleReminderModal(false)}\n            isUpsertList={true}\n            modalTitle={`View Reminder - ${detail.pmrId}`}\n            xRayNumber={pmrOrder.orderNumber}\n            addData={{\n              residentId: detail?.patientId._id,\n              pmrOrderId: pmrOrder?._id,\n              category: TODO_CATEGORY.MED_REVIEW,\n              subCategory: detail?.subCategory,\n            }}\n          />\n        )\n      }\n\n      {\n        visibleCausion && (\n          <PmrCautionModal\n            title={editData ? 'Update causion' : 'Add causion'}\n            form={form}\n            okText={editData ? 'Update' : 'Add'}\n            onCancel={(propsData, closeModal) => {\n              handleUpdateAlert(propsData);\n              setVisibleCausion(closeModal);\n            }}\n            visible={visibleCausion}\n            pmrOrder={pmrOrder}\n            editData={editData}\n          // onPmrOrderId={pmrOrder?._id}\n          />\n        )\n      }\n\n      {\n        deleteCausionModal && (\n          <ConfirmPopup\n            // value={pmrOrder}\n            visible={deleteCausionModal}\n            title={`Delete Caution Note`}\n            description={`Are you want to delete this note ${pmrOrder.alertNote?.alertText} ?`}\n            onOk={() => {\n              handleDeleteCausion();\n            }}\n            okText='Yes'\n            cancelText='Cancel'\n            // loading={deleteBtnLoading}\n            okButtonProps={{ loading: deleteBtnLoading }}\n            onClose={() => {\n              handleDeleteCausionModal(false);\n            }}\n            onCancel={() => {\n              handleDeleteCausionModal(false);\n            }}\n          />\n        )\n      }\n    </div>\n  );\n};\n\nexport default createForm()(PmrOrder);\n"]},"metadata":{},"sourceType":"module"}