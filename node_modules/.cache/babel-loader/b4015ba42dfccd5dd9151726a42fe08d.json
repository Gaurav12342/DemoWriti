{"ast":null,"code":"var _jsxFileName = \"/home/gauravpendherkar/DemoWriti/src/containers/Customers/Pharmacy/index.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { createForm } from \"rc-form\";\nimport { Edit, Filters } from \"../../../assets/images/resident-detail/index\";\nimport axios from \"../../../services/api/config\";\nimport { krollHomeHASync, pharmacyPaginate, pharmacyUpdate } from \"../../../services/api/routes/customer\";\nimport ActiveDeactive from \"../../../components/common/ActiveDeactive\";\nimport Table from \"../../../components/common/Table/index\";\nimport PageHead from \"../../../containers/Customers/Pharmacy/components/PageHead\";\nimport routes from \"../../../routes/constant\";\nimport SettingModal from \"../Clientele/components/SettingModal\";\nimport { CLIENTELE_TYPE } from \"../../../constants/Customer\";\nimport Tooltip from \"rc-tooltip\";\nimport { Info } from \"../../../assets/images/popup\";\nimport AssociatedHomeListModal from \"./components/associatedHome\";\nimport ConfirmPopup from \"../../../components/common/Popup/ConfirmPopup\";\nimport { Toast } from \"../../../components/common\";\nimport { Refresh1 } from \"../../../assets/images/pmr\";\n\nconst _ = require(\"lodash\");\n\nconst Pharmacy = props => {\n  const [loading, setLoading] = useState(false);\n  const [filter, setFilter] = useState({\n    page: 1,\n    limit: 10,\n    sortBy: {\n      createdAt: \"DESC\"\n    },\n    populate: [{\n      homes: [\"name\", \"isActive\", \"emails\", \"uniqueNo\"]\n    }],\n    find: {}\n  });\n  const [data, setData] = useState([]);\n  const [total, setTotal] = useState(0);\n  const [visibleSetting, setVisibleSetting] = useState(false);\n  const [record, setRecord] = useState(null);\n  const authUser = useSelector(state => state.auth.authUser);\n  const [showAssociatedHomeModal, setShowAssociatedHomeModal] = useState(false);\n  const [associatedHomeList, setAssociatedHomeList] = useState([]);\n  const [confirmPopupForSync, setConfirmPopupForSync] = useState(false);\n  const [pharmacyDataForSync, setPharmacyDataForSync] = useState({});\n  const [syncPopupOkButtonLoading, setSyncPopupOkButtonLoading] = useState(false);\n  useEffect(() => {\n    if (filter.hasOwnProperty(\"search\") && filter.search[\"keyword\"]) {\n      const delayDebounceFn = setTimeout(() => {\n        fetch();\n      }, 600);\n      return () => clearTimeout(delayDebounceFn);\n    } else fetch();\n  }, [filter]);\n\n  const modifiedList = list => {\n    let modifiedList = list.map(current => {\n      return current;\n    });\n    return modifiedList;\n  };\n\n  const fetch = () => {\n    setLoading(true);\n    axios({ ...pharmacyPaginate,\n      data: {\n        query: { ...filter\n        }\n      }\n    }).then(data => {\n      if (data.data.code === \"OK\") {\n        let updatedList = modifiedList(data.data.data.data);\n        setData(updatedList);\n        setTotal(data.data.data.count);\n        setLoading(false);\n      } else {\n        setLoading(false);\n      }\n    }).catch(err => {\n      setLoading(false);\n    });\n  };\n\n  const handleTableChange = (pagination, tfilter, sorter) => {\n    if (!pagination) return;\n    let tempFilter = filter;\n    tempFilter = { ...tempFilter,\n      page: pagination.current,\n      limit: pagination.pageSize\n    };\n\n    if (tfilter && Object.keys(tfilter).length) {\n      if (tfilter.isActive && tfilter.isActive.length) {\n        tempFilter.find.isActive = tfilter.isActive;\n      } else if (tempFilter.find.isActive) {\n        delete tempFilter.find[\"isActive\"];\n      }\n\n      tempFilter.page = pagination.current;\n    } else {// tempFilter.filter = {\n      //     type: tempFilter.filter.type\n      // }\n    }\n\n    setFilter(tempFilter);\n  };\n\n  const onShowSizeChange = size => {\n    if (size) {\n      setFilter(prevFilter => ({ ...prevFilter,\n        limit: size,\n        page: 1\n      }));\n    }\n  };\n\n  const handleSearch = event => {\n    let value = event.target.value;\n    let obj = { ...filter,\n      pageNo: 1,\n      search: {\n        keyword: value,\n        keys: [\"name\", \"emails.email\"]\n      }\n    };\n    setFilter(obj);\n  };\n\n  const handleActiveDeactive = record => {\n    let tempData = data.map(rec => {\n      if (rec._id === record._id) {\n        return { ...rec,\n          isActive: !rec.isActive\n        };\n      } else {\n        return rec;\n      }\n    });\n    setData(tempData);\n  };\n\n  const handleShowAssociatedHome = homes => {\n    setAssociatedHomeList(homes);\n    setShowAssociatedHomeModal(true);\n  };\n\n  const onAssociatedHomeModalCancel = () => {\n    setShowAssociatedHomeModal(false);\n  };\n\n  const showConfirmPopupForSync = (value, data) => {\n    setPharmacyDataForSync(data);\n    setConfirmPopupForSync(value);\n  };\n\n  const handleHomeSync = async () => {\n    setSyncPopupOkButtonLoading(true);\n    axios({ ...krollHomeHASync,\n      data: {\n        pharmacyId: pharmacyDataForSync._id\n      }\n    }).then(data => {\n      if (data.data.code === \"OK\") {\n        setConfirmPopupForSync(false);\n        setSyncPopupOkButtonLoading(false);\n        Toast.success(data.data.message);\n      } else {\n        setConfirmPopupForSync(false);\n        setSyncPopupOkButtonLoading(false);\n      }\n    }).catch(error => {\n      setConfirmPopupForSync(false);\n      console.log(\"EEOROR\", error);\n      setSyncPopupOkButtonLoading(false);\n    });\n  };\n\n  const getColumns = () => [{\n    title: \"Sr.No\",\n    keyword: \"index\",\n    dataIndex: \"index\",\n    render: (text, record, index) => (filter.page - 1) * filter.limit + (index + 1)\n  }, {\n    title: \"Name.\",\n    dataIndex: \"name\",\n    render: (text, record) => /*#__PURE__*/React.createElement(React.Fragment, null, text ? text : \"\")\n  }, {\n    title: \"Email\",\n    dataIndex: \"emails\",\n    render: text => /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 25\n      }\n    }, text ? text[0].email : \"\")\n  }, {\n    title: \"Phone No\",\n    dataIndex: \"phone\",\n    render: text => /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        textTransform: \"capitalize\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 9\n      }\n    }, text ? text : \" \")\n  }, {\n    title: \"Unique No\",\n    dataIndex: \"uniqueNo\",\n    render: text => /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        textTransform: \"capitalize\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 9\n      }\n    }, text ? text : \" \")\n  }, {\n    title: \"Active\",\n    dataIndex: \"isActive\",\n    render: (text, record) => /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        textTransform: \"capitalize\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(ActiveDeactive, {\n      documentId: record._id,\n      record: record,\n      isActive: record.isActive,\n      API: pharmacyUpdate,\n      model: \"pharmacy\",\n      onActiveDeactive: record => {\n        handleActiveDeactive(record);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 11\n      }\n    })),\n    filters: [{\n      text: \"Active\",\n      value: true\n    }, {\n      text: \"De-active\",\n      value: false\n    }],\n    onFilter: (value, record) => record.isActive === value\n  }, {\n    title: \"Action\",\n    showRefresh: true,\n    render: (text, record) => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"actions\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      onClick: () => {\n        props.history.push(`${routes.pharmacyUpsert.path}/${record._id}`);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Edit, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 15\n      }\n    }, \"Edit\")), /*#__PURE__*/React.createElement(\"a\", {\n      onClick: () => handleSetting(true, record),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Filters, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 15\n      }\n    }, \"Setting\")), /*#__PURE__*/React.createElement(\"a\", {\n      onClick: () => handleShowAssociatedHome(record.homes),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Info, {\n      style: {\n        marginTop: \"-4px\",\n        cursor: \"pointer\",\n        height: \"20px\",\n        width: \"20px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 15\n      }\n    }, \"Associated Home\")), record.isKroll ? /*#__PURE__*/React.createElement(\"a\", {\n      onClick: () => showConfirmPopupForSync(true, record),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Refresh1, {\n      style: {\n        marginTop: \"-4px\",\n        cursor: \"pointer\",\n        height: \"20px\",\n        width: \"20px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 17\n      }\n    }, \"Sync Kroll Home\")) : \"\"))\n  }];\n\n  const handleRedirect = () => {\n    props.history.push(routes.pharmacyUpsert.path);\n  };\n\n  const handleSetting = (visible, record, res) => {\n    setVisibleSetting(visible);\n    setRecord(record);\n\n    if (res) {\n      let newData = [...data];\n      let index = newData.findIndex(x => x._id === res._id);\n\n      if (index >= 0) {\n        newData[index] = { ...newData[index],\n          assignedSubscriptionGroupId: res.assignedSubscriptionGroupId\n        };\n        setData(newData);\n      }\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pmr_wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(PageHead, {\n    total: total,\n    onRedirect: handleRedirect,\n    onSearch: handleSearch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Table, {\n    columns: getColumns(),\n    datasource: data,\n    loading: loading,\n    onChange: handleTableChange,\n    pagination: {\n      current: filter.page,\n      pageSize: filter.limit,\n      total: total,\n      showSizeChanger: true,\n      onShowSizeChange: onShowSizeChange\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 11\n    }\n  }))), visibleSetting ? /*#__PURE__*/React.createElement(SettingModal, {\n    queryData: CLIENTELE_TYPE.PHARMACY,\n    visible: visibleSetting,\n    subscripData: record,\n    detail: record,\n    onCancel: res => handleSetting(false, null, res),\n    authUser: authUser,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 9\n    }\n  }) : null, showAssociatedHomeModal && /*#__PURE__*/React.createElement(AssociatedHomeListModal, {\n    visible: showAssociatedHomeModal,\n    data: associatedHomeList,\n    onCancel: onAssociatedHomeModalCancel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 9\n    }\n  }), confirmPopupForSync && /*#__PURE__*/React.createElement(ConfirmPopup, {\n    children: /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 13\n      }\n    }, \"Are you sure you want to sync Kroll Home and HomeArea\"),\n    visible: showConfirmPopupForSync,\n    okButtonProps: {\n      loading: syncPopupOkButtonLoading\n    },\n    onOK: handleHomeSync,\n    onCancel: () => showConfirmPopupForSync(false, {}),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 9\n    }\n  }));\n};\n\nexport default createForm()(Pharmacy);","map":{"version":3,"sources":["/home/gauravpendherkar/DemoWriti/src/containers/Customers/Pharmacy/index.js"],"names":["React","useEffect","useState","useSelector","createForm","Edit","Filters","axios","krollHomeHASync","pharmacyPaginate","pharmacyUpdate","ActiveDeactive","Table","PageHead","routes","SettingModal","CLIENTELE_TYPE","Tooltip","Info","AssociatedHomeListModal","ConfirmPopup","Toast","Refresh1","_","require","Pharmacy","props","loading","setLoading","filter","setFilter","page","limit","sortBy","createdAt","populate","homes","find","data","setData","total","setTotal","visibleSetting","setVisibleSetting","record","setRecord","authUser","state","auth","showAssociatedHomeModal","setShowAssociatedHomeModal","associatedHomeList","setAssociatedHomeList","confirmPopupForSync","setConfirmPopupForSync","pharmacyDataForSync","setPharmacyDataForSync","syncPopupOkButtonLoading","setSyncPopupOkButtonLoading","hasOwnProperty","search","delayDebounceFn","setTimeout","fetch","clearTimeout","modifiedList","list","map","current","query","then","code","updatedList","count","catch","err","handleTableChange","pagination","tfilter","sorter","tempFilter","pageSize","Object","keys","length","isActive","onShowSizeChange","size","prevFilter","handleSearch","event","value","target","obj","pageNo","keyword","handleActiveDeactive","tempData","rec","_id","handleShowAssociatedHome","onAssociatedHomeModalCancel","showConfirmPopupForSync","handleHomeSync","pharmacyId","success","message","error","console","log","getColumns","title","dataIndex","render","text","index","email","textTransform","filters","onFilter","showRefresh","history","push","pharmacyUpsert","path","handleSetting","marginTop","cursor","height","width","isKroll","handleRedirect","visible","res","newData","findIndex","x","assignedSubscriptionGroupId","showSizeChanger","PHARMACY"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { createForm } from \"rc-form\";\nimport { Edit, Filters } from \"../../../assets/images/resident-detail/index\";\nimport axios from \"../../../services/api/config\";\nimport {\n  krollHomeHASync,\n  pharmacyPaginate,\n  pharmacyUpdate,\n} from \"../../../services/api/routes/customer\";\nimport ActiveDeactive from \"../../../components/common/ActiveDeactive\";\nimport Table from \"../../../components/common/Table/index\";\nimport PageHead from \"../../../containers/Customers/Pharmacy/components/PageHead\";\nimport routes from \"../../../routes/constant\";\nimport SettingModal from \"../Clientele/components/SettingModal\";\nimport { CLIENTELE_TYPE } from \"../../../constants/Customer\";\nimport Tooltip from \"rc-tooltip\";\nimport { Info } from \"../../../assets/images/popup\";\nimport AssociatedHomeListModal from \"./components/associatedHome\";\nimport ConfirmPopup from \"../../../components/common/Popup/ConfirmPopup\";\nimport { Toast } from \"../../../components/common\";\nimport { Refresh1 } from \"../../../assets/images/pmr\";\n\nconst _ = require(\"lodash\");\n\nconst Pharmacy = (props) => {\n  const [loading, setLoading] = useState(false);\n  const [filter, setFilter] = useState({\n    page: 1,\n    limit: 10,\n    sortBy: { createdAt: \"DESC\" },\n    populate: [{ homes: [\"name\", \"isActive\", \"emails\", \"uniqueNo\"] }],\n    find: {},\n  });\n  const [data, setData] = useState([]);\n  const [total, setTotal] = useState(0);\n  const [visibleSetting, setVisibleSetting] = useState(false);\n  const [record, setRecord] = useState(null);\n  const authUser = useSelector((state) => state.auth.authUser);\n  const [showAssociatedHomeModal, setShowAssociatedHomeModal] = useState(false);\n  const [associatedHomeList, setAssociatedHomeList] = useState([]);\n  const [confirmPopupForSync, setConfirmPopupForSync] = useState(false);\n  const [pharmacyDataForSync, setPharmacyDataForSync] = useState({});\n  const [syncPopupOkButtonLoading, setSyncPopupOkButtonLoading] = useState(\n    false\n  );\n  useEffect(() => {\n    if (filter.hasOwnProperty(\"search\") && filter.search[\"keyword\"]) {\n      const delayDebounceFn = setTimeout(() => {\n        fetch();\n      }, 600);\n      return () => clearTimeout(delayDebounceFn);\n    } else fetch();\n  }, [filter]);\n\n  const modifiedList = (list) => {\n    let modifiedList = list.map((current) => {\n      return current;\n    });\n    return modifiedList;\n  };\n\n  const fetch = () => {\n    setLoading(true);\n    axios({\n      ...pharmacyPaginate,\n      data: { query: { ...filter } },\n    })\n      .then((data) => {\n        if (data.data.code === \"OK\") {\n          let updatedList = modifiedList(data.data.data.data);\n          setData(updatedList);\n          setTotal(data.data.data.count);\n          setLoading(false);\n        } else {\n          setLoading(false);\n        }\n      })\n      .catch((err) => {\n        setLoading(false);\n      });\n  };\n  const handleTableChange = (pagination, tfilter, sorter) => {\n    if (!pagination) return;\n    let tempFilter = filter;\n    tempFilter = {\n      ...tempFilter,\n      page: pagination.current,\n      limit: pagination.pageSize,\n    };\n    if (tfilter && Object.keys(tfilter).length) {\n      if (tfilter.isActive && tfilter.isActive.length) {\n        tempFilter.find.isActive = tfilter.isActive;\n      } else if (tempFilter.find.isActive) {\n        delete tempFilter.find[\"isActive\"];\n      }\n      tempFilter.page = pagination.current;\n    } else {\n      // tempFilter.filter = {\n      //     type: tempFilter.filter.type\n      // }\n    }\n    setFilter(tempFilter);\n  };\n\n  const onShowSizeChange = (size) => {\n    if (size) {\n      setFilter((prevFilter) => ({ ...prevFilter, limit: size, page: 1 }));\n    }\n  };\n\n  const handleSearch = (event) => {\n    let value = event.target.value;\n    let obj = {\n      ...filter,\n      pageNo: 1,\n      search: {\n        keyword: value,\n        keys: [\"name\", \"emails.email\"],\n      },\n    };\n    setFilter(obj);\n  };\n\n  const handleActiveDeactive = (record) => {\n    let tempData = data.map((rec) => {\n      if (rec._id === record._id) {\n        return { ...rec, isActive: !rec.isActive };\n      } else {\n        return rec;\n      }\n    });\n    setData(tempData);\n  };\n  const handleShowAssociatedHome = (homes) => {\n    setAssociatedHomeList(homes);\n    setShowAssociatedHomeModal(true);\n  };\n  const onAssociatedHomeModalCancel = () => {\n    setShowAssociatedHomeModal(false);\n  };\n  const showConfirmPopupForSync = (value, data) => {\n    setPharmacyDataForSync(data);\n    setConfirmPopupForSync(value);\n  };\n\n  const handleHomeSync = async () => {\n    setSyncPopupOkButtonLoading(true);\n    axios({\n      ...krollHomeHASync,\n      data: { pharmacyId: pharmacyDataForSync._id },\n    })\n      .then((data) => {\n        if (data.data.code === \"OK\") {\n          setConfirmPopupForSync(false);\n          setSyncPopupOkButtonLoading(false);\n          Toast.success(data.data.message);\n        } else {\n          setConfirmPopupForSync(false);\n          setSyncPopupOkButtonLoading(false);\n        }\n      })\n      .catch((error) => {\n        setConfirmPopupForSync(false);\n        console.log(\"EEOROR\", error);\n        setSyncPopupOkButtonLoading(false);\n      });\n  };\n  const getColumns = () => [\n    {\n      title: \"Sr.No\",\n      keyword: \"index\",\n      dataIndex: \"index\",\n      render: (text, record, index) =>\n        (filter.page - 1) * filter.limit + (index + 1),\n    },\n    {\n      title: \"Name.\",\n      dataIndex: \"name\",\n      render: (text, record) => <>{text ? text : \"\"}</>,\n    },\n    {\n      title: \"Email\",\n      dataIndex: \"emails\",\n      render: (text) => <span>{text ? text[0].email : \"\"}</span>,\n    },\n    {\n      title: \"Phone No\",\n      dataIndex: \"phone\",\n      render: (text) => (\n        <span style={{ textTransform: \"capitalize\" }}>{text ? text : \" \"}</span>\n      ),\n    },\n    {\n      title: \"Unique No\",\n      dataIndex: \"uniqueNo\",\n      render: (text) => (\n        <span style={{ textTransform: \"capitalize\" }}>{text ? text : \" \"}</span>\n      ),\n    },\n    {\n      title: \"Active\",\n      dataIndex: \"isActive\",\n      render: (text, record) => (\n        <span style={{ textTransform: \"capitalize\" }}>\n          <ActiveDeactive\n            documentId={record._id}\n            record={record}\n            isActive={record.isActive}\n            API={pharmacyUpdate}\n            model=\"pharmacy\"\n            onActiveDeactive={(record) => {\n              handleActiveDeactive(record);\n            }}\n          />\n        </span>\n      ),\n      filters: [\n        { text: \"Active\", value: true },\n        { text: \"De-active\", value: false },\n      ],\n      onFilter: (value, record) => record.isActive === value,\n    },\n    {\n      title: \"Action\",\n      showRefresh: true,\n      render: (text, record) => (\n        <>\n          <div className=\"actions\">\n            <a\n              onClick={() => {\n                props.history.push(\n                  `${routes.pharmacyUpsert.path}/${record._id}`\n                );\n              }}\n            >\n              <Edit />\n              <p>Edit</p>\n            </a>\n            <a onClick={() => handleSetting(true, record)}>\n              <Filters />\n              <p>Setting</p>\n            </a>\n            \n            <a onClick={() => handleShowAssociatedHome(record.homes)}>\n              <Info\n                style={{\n                  marginTop: \"-4px\",\n                  cursor: \"pointer\",\n                  height: \"20px\",\n                  width: \"20px\",\n                }}\n              />\n              <p>Associated Home</p>\n            </a>\n            {record.isKroll ? (\n              <a onClick={() => showConfirmPopupForSync(true, record)}>\n                <Refresh1\n                  style={{\n                    marginTop: \"-4px\",\n                    cursor: \"pointer\",\n                    height: \"20px\",\n                    width: \"20px\",\n                  }}\n                />\n                <p>Sync Kroll Home</p>\n              </a>\n            ) : (\n              \"\"\n            )}\n          </div>\n        </>\n      ),\n    },\n  ];\n\n  const handleRedirect = () => {\n    props.history.push(routes.pharmacyUpsert.path);\n  };\n\n  const handleSetting = (visible, record, res) => {\n    setVisibleSetting(visible);\n    setRecord(record);\n    if (res) {\n      let newData = [...data];\n      let index = newData.findIndex((x) => x._id === res._id);\n      if (index >= 0) {\n        newData[index] = {\n          ...newData[index],\n          assignedSubscriptionGroupId: res.assignedSubscriptionGroupId,\n        };\n        setData(newData);\n      }\n    }\n  };\n\n  return (\n    <>\n      <div className=\"pmr_wrap\">\n        <div className=\"container\">\n          <PageHead\n            total={total}\n            onRedirect={handleRedirect}\n            onSearch={handleSearch}\n          />\n          <Table\n            columns={getColumns()}\n            datasource={data}\n            loading={loading}\n            onChange={handleTableChange}\n            pagination={{\n              current: filter.page,\n              pageSize: filter.limit,\n              total: total,\n              showSizeChanger: true,\n              onShowSizeChange: onShowSizeChange,\n            }}\n          />\n        </div>\n      </div>\n      {visibleSetting ? (\n        <SettingModal\n          queryData={CLIENTELE_TYPE.PHARMACY}\n          visible={visibleSetting}\n          subscripData={record}\n          detail={record}\n          onCancel={(res) => handleSetting(false, null, res)}\n          authUser={authUser}\n        />\n      ) : null}\n\n      {showAssociatedHomeModal && (\n        <AssociatedHomeListModal\n          visible={showAssociatedHomeModal}\n          data={associatedHomeList}\n          onCancel={onAssociatedHomeModalCancel}\n        />\n      )}\n      {confirmPopupForSync && (\n        <ConfirmPopup\n          children={\n            <b>Are you sure you want to sync Kroll Home and HomeArea</b>\n          }\n          visible={showConfirmPopupForSync}\n          okButtonProps={{ loading: syncPopupOkButtonLoading }}\n          onOK={handleHomeSync}\n          onCancel={() => showConfirmPopupForSync(false, {})}\n        />\n      )}\n    </>\n  );\n};\n\nexport default createForm()(Pharmacy);\n"]},"metadata":{},"sourceType":"module"}