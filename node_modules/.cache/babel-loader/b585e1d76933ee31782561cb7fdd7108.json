{"ast":null,"code":"var _jsxFileName = \"/home/gauravpendherkar/DemoWriti/src/containers/ResidentDetail/View/AddResident/index.js\";\nimport React, { useState } from 'react';\nimport { createForm } from 'rc-form';\nimport AddResidentPopup from './AddResidentPopup';\nimport axios from '../../../../services/api/config';\nimport { addResident } from '../../../../services/api/routes/resident';\nimport { Toast } from '../../../../components/common';\nimport { setTimeToZero } from '../../../../util/moment';\n\nconst moment = require('moment');\n\nfunction AddResidentMain(props) {\n  const {\n    isVisible,\n    onCancel,\n    form,\n    authUser,\n    homeId,\n    onAddedResident\n  } = props;\n  const [homeAreaId, setHomeAreaId] = useState([]);\n  const [POAData, setPOAData] = useState([]);\n  const [current, setCurrent] = useState([1]);\n  const [btnLoading, setBtnLoading] = useState(false);\n\n  const handleDoctorChange = val => {\n    form.setFieldsValue({\n      physicianId: val\n    });\n  };\n\n  const handleSubmit = () => {\n    // debugger;\n    const {\n      validateFields\n    } = form;\n    validateFields((error, value) => {\n      if (error) {\n        return console.log('errors', error);\n      } //   setBtnLoading(true);\n\n\n      value.dob = moment(value.dob).format('MM/DD/YYYY');\n      value.homeId = homeId; // value.isPrimary = true;\n\n      if (current && current.length > 0 && (value.poaFirstName1 || value.poaLastName1)) {\n        let poa = [];\n        current.forEach(i => {\n          poa.push({\n            name: value[`poaLastName${i}`] + '  ' + value[`poaFirstName${i}`],\n            contactNo: value[`poaPhone${i}`],\n            email: value[`poaEmail${i}`]\n          });\n          delete value[`poaLastName${i}`];\n          delete value[`poaFirstName${i}`];\n          delete value[`poaPhone${i}`];\n          delete value[`poaEmail${i}`];\n        });\n        value.poa = poa;\n      }\n\n      value.weight = {\n        value: value.weight,\n        date: setTimeToZero(moment())\n      };\n      value.height = {\n        value: value.height,\n        date: setTimeToZero(moment())\n      };\n      value.addresses = [{\n        line1: value.line1,\n        line2: value.line2,\n        city: value.city,\n        isPrimary: true,\n        province: value.province,\n        pincode: value.pincode\n      }];\n      delete value.line1;\n      delete value.line2;\n      delete value.city;\n      delete value.province;\n      delete value.pincode;\n      addResidentRequest(value);\n      console.log('current', current);\n    });\n  };\n\n  const addResidentRequest = value => {\n    setBtnLoading(true);\n    let {\n      method,\n      url,\n      baseURL\n    } = addResident;\n    axios({\n      method,\n      url,\n      baseURL,\n      data: value\n    }).then(({\n      data\n    }) => {\n      if (data.code === 'OK') {\n        setBtnLoading(false);\n        Toast.success(data.message);\n        onAddedResident(true);\n        onCancel();\n      }\n\n      setBtnLoading(false);\n    }).catch(err => {\n      setBtnLoading(false);\n    });\n  };\n\n  const addCustomFields = () => {\n    const {\n      validateFields\n    } = form;\n    validateFields((error, value) => {\n      let tCurrent = current,\n          canInsert = true;\n      tCurrent.forEach(i => {\n        if (!(value[`poaFirstName${i}`] && value[`poaLastName${i}`])) {\n          canInsert = false;\n        }\n      });\n\n      if (canInsert) {\n        tCurrent.push(tCurrent[tCurrent.length - 1] + 1);\n        setCurrent(tCurrent);\n      }\n    });\n  };\n\n  const handleDeleteClick = ci => {\n    let index = current.indexOf(ci);\n\n    if (index >= 0) {\n      let tCurrent = [...current];\n      tCurrent.splice(index, 1);\n\n      if (tCurrent.length > 0) {\n        setCurrent(tCurrent);\n      } // form.resetFields([`poaLastName${ci}`, `poaFirstName${ci}`, `poaPhone${ci}`, `poaEmail${ci}`])\n\n    }\n  };\n\n  const handleCascaderChange = e => {\n    console.log('TCL: handleCascaderChange -> e', e); // setHomeAreaId(['primary'])\n  };\n\n  return /*#__PURE__*/React.createElement(AddResidentPopup, {\n    isVisible: isVisible,\n    form: form,\n    onCancel: onCancel,\n    authUser: authUser,\n    onSubmit: handleSubmit,\n    onDoctorChange: handleDoctorChange,\n    onCascaderChange: handleCascaderChange,\n    homeAreaId: homeAreaId,\n    onAddCustomFields: addCustomFields,\n    current: current,\n    POAData: POAData,\n    onDeleteClick: handleDeleteClick,\n    btnLoading: btnLoading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 5\n    }\n  });\n}\n\nconst wrappedResidentForm = createForm()(AddResidentMain);\nexport default wrappedResidentForm;","map":{"version":3,"sources":["/home/gauravpendherkar/DemoWriti/src/containers/ResidentDetail/View/AddResident/index.js"],"names":["React","useState","createForm","AddResidentPopup","axios","addResident","Toast","setTimeToZero","moment","require","AddResidentMain","props","isVisible","onCancel","form","authUser","homeId","onAddedResident","homeAreaId","setHomeAreaId","POAData","setPOAData","current","setCurrent","btnLoading","setBtnLoading","handleDoctorChange","val","setFieldsValue","physicianId","handleSubmit","validateFields","error","value","console","log","dob","format","length","poaFirstName1","poaLastName1","poa","forEach","i","push","name","contactNo","email","weight","date","height","addresses","line1","line2","city","isPrimary","province","pincode","addResidentRequest","method","url","baseURL","data","then","code","success","message","catch","err","addCustomFields","tCurrent","canInsert","handleDeleteClick","ci","index","indexOf","splice","handleCascaderChange","e","wrappedResidentForm"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { createForm } from 'rc-form';\nimport AddResidentPopup from './AddResidentPopup';\nimport axios from '../../../../services/api/config';\nimport { addResident } from '../../../../services/api/routes/resident';\nimport { Toast } from '../../../../components/common';\nimport { setTimeToZero } from '../../../../util/moment';\nconst moment = require('moment');\nfunction AddResidentMain(props) {\n  const {\n    isVisible,\n    onCancel,\n    form,\n    authUser,\n    homeId,\n    onAddedResident,\n  } = props;\n  const [homeAreaId, setHomeAreaId] = useState([]);\n  const [POAData, setPOAData] = useState([]);\n  const [current, setCurrent] = useState([1]);\n  const [btnLoading, setBtnLoading] = useState(false);\n\n  const handleDoctorChange = (val) => {\n    form.setFieldsValue({\n      physicianId: val,\n    });\n  };\n  const handleSubmit = () => {\n    // debugger;\n    const { validateFields } = form;\n    validateFields((error, value) => {\n      if (error) {\n        return console.log('errors', error);\n      }\n      //   setBtnLoading(true);\n      value.dob = moment(value.dob).format('MM/DD/YYYY');\n      value.homeId = homeId;\n      // value.isPrimary = true;\n      if (\n        current &&\n        current.length > 0 &&\n        (value.poaFirstName1 || value.poaLastName1)\n      ) {\n        let poa = [];\n        current.forEach((i) => {\n          poa.push({\n            name: value[`poaLastName${i}`] + '  ' + value[`poaFirstName${i}`],\n            contactNo: value[`poaPhone${i}`],\n            email: value[`poaEmail${i}`],\n          });\n          delete value[`poaLastName${i}`];\n          delete value[`poaFirstName${i}`];\n          delete value[`poaPhone${i}`];\n          delete value[`poaEmail${i}`];\n        });\n        value.poa = poa;\n      }\n      value.weight = {\n        value: value.weight,\n        date: setTimeToZero(moment())\n      }\n      value.height = {\n        value: value.height,\n        date: setTimeToZero(moment())\n      }\n      value.addresses = [{\n        line1: value.line1,\n        line2: value.line2,\n        city: value.city,\n        isPrimary: true,\n        province: value.province,\n        pincode: value.pincode\n      }]\n      delete value.line1\n      delete value.line2\n      delete value.city\n      delete value.province\n      delete value.pincode\n      addResidentRequest(value);\n      console.log('current', current);\n    });\n  };\n  const addResidentRequest = (value) => {\n    setBtnLoading(true);\n    let { method, url, baseURL } = addResident;\n    axios({ method, url, baseURL, data: value })\n      .then(({ data }) => {\n        if (data.code === 'OK') {\n          setBtnLoading(false);\n          Toast.success(data.message);\n          onAddedResident(true);\n          onCancel();\n        }\n        setBtnLoading(false);\n      })\n      .catch((err) => {\n        setBtnLoading(false);\n      });\n  };\n  const addCustomFields = () => {\n    const { validateFields } = form;\n    validateFields((error, value) => {\n      let tCurrent = current,\n        canInsert = true;\n      tCurrent.forEach((i) => {\n        if (!(value[`poaFirstName${i}`] && value[`poaLastName${i}`])) {\n          canInsert = false;\n        }\n      });\n      if (canInsert) {\n        tCurrent.push(tCurrent[tCurrent.length - 1] + 1);\n        setCurrent(tCurrent);\n      }\n    });\n  };\n  const handleDeleteClick = (ci) => {\n    let index = current.indexOf(ci);\n    if (index >= 0) {\n      let tCurrent = [...current];\n      tCurrent.splice(index, 1);\n      if (tCurrent.length > 0) {\n        setCurrent(tCurrent);\n      }\n      // form.resetFields([`poaLastName${ci}`, `poaFirstName${ci}`, `poaPhone${ci}`, `poaEmail${ci}`])\n    }\n  };\n  const handleCascaderChange = (e) => {\n    console.log('TCL: handleCascaderChange -> e', e);\n    // setHomeAreaId(['primary'])\n  };\n  return (\n    <AddResidentPopup\n      isVisible={isVisible}\n      form={form}\n      onCancel={onCancel}\n      authUser={authUser}\n      onSubmit={handleSubmit}\n      onDoctorChange={handleDoctorChange}\n      onCascaderChange={handleCascaderChange}\n      homeAreaId={homeAreaId}\n      onAddCustomFields={addCustomFields}\n      current={current}\n      POAData={POAData}\n      onDeleteClick={handleDeleteClick}\n      btnLoading={btnLoading}\n    />\n  );\n}\nconst wrappedResidentForm = createForm()(AddResidentMain);\nexport default wrappedResidentForm;\n"]},"metadata":{},"sourceType":"module"}