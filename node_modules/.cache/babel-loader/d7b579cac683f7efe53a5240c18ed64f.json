{"ast":null,"code":"var _jsxFileName = \"/home/gauravpendherkar/DemoWriti/src/containers/PmrTodo/components/PmrCautionModal.js\";\nimport React, { useState, useEffect } from 'react';\nimport Modal from '../../../components/common/Popup/index';\nimport { TextArea } from '../../../components/common/index';\nimport axios from '../../../services/api/config';\nimport { Toast } from '../../../components/common/Toast';\nimport { upsertCausion } from '../../../services/api/routes/pmr';\nimport RefOptionList from 'rc-select/lib/OptionList';\n\nconst PmrCautionModal = props => {\n  const {\n    visible,\n    form,\n    onCancel,\n    title,\n    pmrOrder,\n    okText,\n    editData\n  } = props;\n  const {\n    getFieldDecorator,\n    validateFields,\n    setFieldsValue,\n    resetFields\n  } = form;\n  const [btnLoading, setBtnLoading] = useState(false);\n  useEffect(() => {\n    if (editData) {\n      var _pmrOrder$alertNote;\n\n      let obj = {\n        alertText: (_pmrOrder$alertNote = pmrOrder.alertNote) === null || _pmrOrder$alertNote === void 0 ? void 0 : _pmrOrder$alertNote.alertText\n      };\n      setFieldsValue(obj);\n    }\n  }, [editData]);\n\n  const addAlert = () => {\n    setBtnLoading(true);\n    validateFields((err, values) => {\n      if (err) {\n        Toast.error('Please Add Causion');\n        return;\n      }\n\n      let request = {\n        _id: editData ? pmrOrder.alertNote._id : undefined,\n        pmrOrderId: pmrOrder === null || pmrOrder === void 0 ? void 0 : pmrOrder._id,\n        alertText: values.alertText\n      };\n      let {\n        method,\n        url,\n        baseURL\n      } = upsertCausion;\n      axios({\n        method,\n        url,\n        baseURL,\n        data: request\n      }).then(response => {\n        if ((response === null || response === void 0 ? void 0 : response.data.code) == 'OK') {\n          setBtnLoading(false);\n          onCancel(response === null || response === void 0 ? void 0 : response.data.data, false); // onCancel(response?.data.data);\n\n          Toast.success(response.data.message);\n          resetFields();\n        } else {\n          setBtnLoading(false);\n          Toast.error(response.data.message);\n        }\n      }).catch(error => {\n        setBtnLoading(false);\n      });\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Modal, {\n    form: form,\n    visible: visible,\n    title: title,\n    onCancel: onCancel,\n    onClose: onCancel,\n    maskClosable: false,\n    onOk: addAlert,\n    okButtonProps: {\n      loading: btnLoading\n    } // cancelText={cancelText}\n    // style={{ width: '50%' }}\n    ,\n    okText: okText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form_row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form_group col-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  }, \"Add Caution\", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 26\n    }\n  }, \"*\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"additional-textarea\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form_wrap mb-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 15\n    }\n  }, getFieldDecorator('alertText', {\n    rules: [{\n      required: false,\n      message: 'Please enter the description.!'\n    }]\n  })( /*#__PURE__*/React.createElement(TextArea, {\n    name: \"alertText\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 20\n    }\n  }))))))));\n};\n\nexport default PmrCautionModal;","map":{"version":3,"sources":["/home/gauravpendherkar/DemoWriti/src/containers/PmrTodo/components/PmrCautionModal.js"],"names":["React","useState","useEffect","Modal","TextArea","axios","Toast","upsertCausion","RefOptionList","PmrCautionModal","props","visible","form","onCancel","title","pmrOrder","okText","editData","getFieldDecorator","validateFields","setFieldsValue","resetFields","btnLoading","setBtnLoading","obj","alertText","alertNote","addAlert","err","values","error","request","_id","undefined","pmrOrderId","method","url","baseURL","data","then","response","code","success","message","catch","loading","rules","required"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Modal from '../../../components/common/Popup/index';\nimport { TextArea } from '../../../components/common/index';\nimport axios from '../../../services/api/config';\nimport { Toast } from '../../../components/common/Toast';\nimport { upsertCausion } from '../../../services/api/routes/pmr';\nimport RefOptionList from 'rc-select/lib/OptionList';\n\nconst PmrCautionModal = (props) => {\n  const { visible, form, onCancel, title, pmrOrder, okText, editData } = props;\n  const {\n    getFieldDecorator,\n    validateFields,\n    setFieldsValue,\n    resetFields,\n  } = form;\n  const [btnLoading, setBtnLoading] = useState(false);\n\n  useEffect(() => {\n    if (editData) {\n      let obj = {\n        alertText: pmrOrder.alertNote?.alertText,\n      };\n\n      setFieldsValue(obj);\n    }\n  }, [editData]);\n\n  const addAlert = () => {\n    setBtnLoading(true);\n    validateFields((err, values) => {\n      if (err) {\n        Toast.error('Please Add Causion');\n        return;\n      }\n      let request = {\n        _id: editData ? pmrOrder.alertNote._id : undefined,\n        pmrOrderId: pmrOrder?._id,\n        alertText: values.alertText,\n      };\n      let { method, url, baseURL } = upsertCausion;\n      axios({ method, url, baseURL, data: request })\n        .then((response) => {\n          if (response?.data.code == 'OK') {\n            setBtnLoading(false);\n            onCancel(response?.data.data, false);\n            // onCancel(response?.data.data);\n            Toast.success(response.data.message);\n            resetFields();\n          } else {\n            setBtnLoading(false);\n            Toast.error(response.data.message);\n          }\n        })\n        .catch((error) => {\n          setBtnLoading(false);\n        });\n    });\n  };\n  return (\n    <>\n      <Modal\n        form={form}\n        visible={visible}\n        title={title}\n        onCancel={onCancel}\n        onClose={onCancel}\n        maskClosable={false}\n        onOk={addAlert}\n        okButtonProps={{ loading: btnLoading }}\n        // cancelText={cancelText}\n        // style={{ width: '50%' }}\n        okText={okText}\n      >\n        <div className='form_row'>\n          <div className='form_group col-12'>\n            <label>\n              Add Caution<span>*</span>\n            </label>\n            <div className='additional-textarea'>\n              <div className='form_wrap mb-12'>\n                {getFieldDecorator('alertText', {\n                  rules: [\n                    {\n                      required: false,\n                      message: 'Please enter the description.!',\n                    },\n                  ],\n                })(<TextArea name='alertText' />)}\n              </div>\n            </div>\n          </div>\n        </div>\n      </Modal>\n    </>\n  );\n};\n\nexport default PmrCautionModal;\n"]},"metadata":{},"sourceType":"module"}