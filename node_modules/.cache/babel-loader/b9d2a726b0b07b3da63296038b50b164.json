{"ast":null,"code":"var _jsxFileName = \"/home/gauravpendherkar/DemoWriti/src/components/SearchMedication/SearchMedicationCopy.js\";\nimport React from 'react';\nimport { Select, Option, Spin } from '../common';\nimport { useCacheQuery } from '../../hooks';\nimport { getDrugs } from '../../services/api/routes/prescription';\nimport axios from '../../services/api/services/common';\n\nconst debounce = require('lodash/debounce');\n\nconst SearchMedicine = props => {\n  const {\n    onSelectMedication,\n    onChange\n  } = props;\n  const {\n    loading,\n    error,\n    data,\n    fetchResults\n  } = useCacheQuery('prescriptions', search => {\n    return axios({ ...getDrugs,\n      data: {\n        search: search\n      }\n    }).then(res => {\n      if (res.code === 'OK') {\n        return res.data;\n      }\n    }); // return fetch(`https://api.drugbank.com/v1/ca/drug_names?q=${search}`, {\n    //   headers: {\n    //     Authorization: 'a4cf8a1fb8a4794786a2e4f8a6bb38a5',\n    //     'Access-Control-Allow-Origin': '*'\n    //   }\n    // }).then(res => res.json())\n  }, {\n    clearOnTabClose: false\n  });\n\n  if (!!error) {\n    console.log(\"errror => \", error);\n  }\n\n  React.useEffect(() => {\n    var _props$value;\n\n    onSelectMedication(props.value, {});\n\n    if (((_props$value = props.value) === null || _props$value === void 0 ? void 0 : _props$value.length) > 2) {\n      const delayDebounceFn = setTimeout(() => {\n        fetchResults(props.value);\n      }, 750);\n      return () => clearTimeout(delayDebounceFn);\n    }\n\n    ;\n  }, [props.value]);\n\n  const handleMedicationSearch = value => {//   if (value && value.length > 2) {\n    //     onSelectMedication(value, {})\n    //     const delayDebounceFn = setTimeout(() => {\n    //       fetchResults(value)\n    //     }, 750)\n    //     return () => clearTimeout(delayDebounceFn)\n    //   };\n  };\n\n  const handleMedicationSelect = prescribable_name => {\n    let foundMedication = data.find(data => data.prescribable_name === prescribable_name);\n    onSelectMedication(prescribable_name, foundMedication);\n  };\n\n  return /*#__PURE__*/React.createElement(Select, {\n    combobox: true,\n    showArrow: false,\n    placeholder: \"Search Medication\",\n    allowClear: true,\n    filterOption: false,\n    onChange: onChange,\n    showSearch: true,\n    onSearch: handleMedicationSearch,\n    onSelect: handleMedicationSelect,\n    disabled: props.disabled,\n    searchable: false,\n    value: props.value,\n    notFoundContent: loading ? /*#__PURE__*/React.createElement(Spin, {\n      style: {\n        height: 'fit-content'\n      },\n      spinning: loading,\n      str: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 34\n      }\n    }) : 'No Data Found',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 5\n    }\n  }, !loading && (data === null || data === void 0 ? void 0 : data.length) > 0 && data.map((domainData, i) => {\n    return /*#__PURE__*/React.createElement(Option, {\n      key: i,\n      value: domainData.prescribable_name,\n      title: domainData.prescribable_name,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }\n    }, domainData.prescribable_name);\n  }));\n};\n\nexport default SearchMedicine;","map":{"version":3,"sources":["/home/gauravpendherkar/DemoWriti/src/components/SearchMedication/SearchMedicationCopy.js"],"names":["React","Select","Option","Spin","useCacheQuery","getDrugs","axios","debounce","require","SearchMedicine","props","onSelectMedication","onChange","loading","error","data","fetchResults","search","then","res","code","clearOnTabClose","console","log","useEffect","value","length","delayDebounceFn","setTimeout","clearTimeout","handleMedicationSearch","handleMedicationSelect","prescribable_name","foundMedication","find","disabled","height","map","domainData","i"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,MAAT,EAAiBC,MAAjB,EAAyBC,IAAzB,QAAqC,WAArC;AACA,SAASC,aAAT,QAA8B,aAA9B;AACA,SAASC,QAAT,QAAyB,wCAAzB;AACA,OAAOC,KAAP,MAAkB,oCAAlB;;AAEA,MAAMC,QAAQ,GAAGC,OAAO,CAAC,iBAAD,CAAxB;;AAEA,MAAMC,cAAc,GAAIC,KAAD,IAAW;AAChC,QAAM;AAAEC,IAAAA,kBAAF;AAAsBC,IAAAA;AAAtB,MAAmCF,KAAzC;AAEA,QAAM;AAAEG,IAAAA,OAAF;AAAWC,IAAAA,KAAX;AAAkBC,IAAAA,IAAlB;AAAwBC,IAAAA;AAAxB,MAAyCZ,aAAa,CAC1D,eAD0D,EAE1Da,MAAM,IAAI;AACR,WAAOX,KAAK,CAAC,EAAE,GAAGD,QAAL;AAAeU,MAAAA,IAAI,EAAE;AAAEE,QAAAA,MAAM,EAAEA;AAAV;AAArB,KAAD,CAAL,CAAiDC,IAAjD,CAAsDC,GAAG,IAAI;AAClE,UAAIA,GAAG,CAACC,IAAJ,KAAa,IAAjB,EAAuB;AACrB,eAAOD,GAAG,CAACJ,IAAX;AACD;AACF,KAJM,CAAP,CADQ,CAMR;AACA;AACA;AACA;AACA;AACA;AACD,GAdyD,EAe1D;AAAEM,IAAAA,eAAe,EAAE;AAAnB,GAf0D,CAA5D;;AAkBA,MAAI,CAAC,CAACP,KAAN,EAAa;AACXQ,IAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BT,KAA1B;AACD;;AAEDd,EAAAA,KAAK,CAACwB,SAAN,CAAgB,MAAM;AAAA;;AACpBb,IAAAA,kBAAkB,CAACD,KAAK,CAACe,KAAP,EAAc,EAAd,CAAlB;;AACA,QAAI,iBAAAf,KAAK,CAACe,KAAN,8DAAaC,MAAb,IAAsB,CAA1B,EAA6B;AAC3B,YAAMC,eAAe,GAAGC,UAAU,CAAC,MAAM;AACvCZ,QAAAA,YAAY,CAACN,KAAK,CAACe,KAAP,CAAZ;AACD,OAFiC,EAE/B,GAF+B,CAAlC;AAGA,aAAO,MAAMI,YAAY,CAACF,eAAD,CAAzB;AAED;;AAAA;AACF,GATD,EASG,CAACjB,KAAK,CAACe,KAAP,CATH;;AAWA,QAAMK,sBAAsB,GAAIL,KAAD,IAAW,CACxC;AACA;AACA;AACA;AACA;AACA;AAEA;AACD,GATD;;AAWA,QAAMM,sBAAsB,GAAIC,iBAAD,IAAuB;AACpD,QAAIC,eAAe,GAAGlB,IAAI,CAACmB,IAAL,CAAUnB,IAAI,IAAIA,IAAI,CAACiB,iBAAL,KAA2BA,iBAA7C,CAAtB;AACArB,IAAAA,kBAAkB,CAACqB,iBAAD,EAAoBC,eAApB,CAAlB;AACD,GAHD;;AAKA,sBACE,oBAAC,MAAD;AACE,IAAA,QAAQ,EAAE,IADZ;AAEE,IAAA,SAAS,EAAE,KAFb;AAGE,IAAA,WAAW,EAAC,mBAHd;AAIE,IAAA,UAAU,EAAE,IAJd;AAKE,IAAA,YAAY,EAAE,KALhB;AAME,IAAA,QAAQ,EAAErB,QANZ;AAOE,IAAA,UAAU,EAAE,IAPd;AAQE,IAAA,QAAQ,EAAEkB,sBARZ;AASE,IAAA,QAAQ,EAAEC,sBATZ;AAUE,IAAA,QAAQ,EAAErB,KAAK,CAACyB,QAVlB;AAWE,IAAA,UAAU,EAAE,KAXd;AAYE,IAAA,KAAK,EAAEzB,KAAK,CAACe,KAZf;AAaE,IAAA,eAAe,EAAEZ,OAAO,gBAAG,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AAAEuB,QAAAA,MAAM,EAAE;AAAV,OAAb;AAAwC,MAAA,QAAQ,EAAEvB,OAAlD;AAA2D,MAAA,GAAG,EAAC,QAA/D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAH,GAAqF,eAb/G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAgBI,CAACA,OAAD,IACA,CAAAE,IAAI,SAAJ,IAAAA,IAAI,WAAJ,YAAAA,IAAI,CAAEW,MAAN,IAAe,CADf,IAEAX,IAAI,CAACsB,GAAL,CAAS,CAACC,UAAD,EAAaC,CAAb,KAAmB;AAC1B,wBACE,oBAAC,MAAD;AACE,MAAA,GAAG,EAAEA,CADP;AAEE,MAAA,KAAK,EAAED,UAAU,CAACN,iBAFpB;AAGE,MAAA,KAAK,EAAEM,UAAU,CAACN,iBAHpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAKGM,UAAU,CAACN,iBALd,CADF;AASD,GAVD,CAlBJ,CADF;AAgCD,CApFD;;AAsFA,eAAevB,cAAf","sourcesContent":["import React from 'react';\nimport { Select, Option, Spin } from '../common';\nimport { useCacheQuery } from '../../hooks';\nimport { getDrugs } from '../../services/api/routes/prescription'\nimport axios from '../../services/api/services/common'\n\nconst debounce = require('lodash/debounce')\n\nconst SearchMedicine = (props) => {\n  const { onSelectMedication, onChange } = props;\n\n  const { loading, error, data, fetchResults } = useCacheQuery(\n    'prescriptions',\n    search => {\n      return axios({ ...getDrugs, data: { search: search } }).then(res => {\n        if (res.code === 'OK') {\n          return res.data\n        }\n      })\n      // return fetch(`https://api.drugbank.com/v1/ca/drug_names?q=${search}`, {\n      //   headers: {\n      //     Authorization: 'a4cf8a1fb8a4794786a2e4f8a6bb38a5',\n      //     'Access-Control-Allow-Origin': '*'\n      //   }\n      // }).then(res => res.json())\n    },\n    { clearOnTabClose: false }\n  )\n\n  if (!!error) {\n    console.log(\"errror => \", error)\n  }\n\n  React.useEffect(() => {\n    onSelectMedication(props.value, {})\n    if (props.value?.length > 2) {\n      const delayDebounceFn = setTimeout(() => {\n        fetchResults(props.value)\n      }, 750)\n      return () => clearTimeout(delayDebounceFn)\n\n    };\n  }, [props.value])\n\n  const handleMedicationSearch = (value) => {\n    //   if (value && value.length > 2) {\n    //     onSelectMedication(value, {})\n    //     const delayDebounceFn = setTimeout(() => {\n    //       fetchResults(value)\n    //     }, 750)\n    //     return () => clearTimeout(delayDebounceFn)\n\n    //   };\n  }\n\n  const handleMedicationSelect = (prescribable_name) => {\n    let foundMedication = data.find(data => data.prescribable_name === prescribable_name);\n    onSelectMedication(prescribable_name, foundMedication)\n  }\n\n  return (\n    <Select\n      combobox={true}\n      showArrow={false}\n      placeholder=\"Search Medication\"\n      allowClear={true}\n      filterOption={false}\n      onChange={onChange}\n      showSearch={true}\n      onSearch={handleMedicationSearch}\n      onSelect={handleMedicationSelect}\n      disabled={props.disabled}\n      searchable={false}\n      value={props.value}\n      notFoundContent={loading ? <Spin style={{ height: 'fit-content' }} spinning={loading} str=\"center\"></Spin> : 'No Data Found'}\n    >\n      {\n        !loading &&\n        data?.length > 0 &&\n        data.map((domainData, i) => {\n          return (\n            <Option\n              key={i}\n              value={domainData.prescribable_name}\n              title={domainData.prescribable_name}\n            >\n              {domainData.prescribable_name}\n            </Option>\n          );\n        })}\n    </Select>\n  );\n};\n\nexport default SearchMedicine;\n"]},"metadata":{},"sourceType":"module"}