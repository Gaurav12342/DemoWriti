{"ast":null,"code":"var _jsxFileName = \"/home/gauravpendherkar/DemoWriti/src/components/Prescription/MedFavourite.js\";\nimport React, { useEffect, useState } from 'react';\nimport { getFavouriteMeds, removeFavouriteMeds } from '../../services/api/routes/prescription';\nimport axios from '../../services/api/services/common';\nimport { Button, Search, Toast, CheckBox } from '../../components/common';\nimport { Clear } from '../../assets/images/index';\n\nconst _ = require('lodash');\n\nconst List = props => {\n  const {\n    tableLength,\n    onSaveFav,\n    tableData,\n    isFavAdded\n  } = props;\n  const [loader, setLoader] = useState(false);\n  const [saveLoader, setSaveLoader] = useState(false);\n  const [data, setData] = useState([]);\n  const [response, setResponse] = useState();\n  const [selected, setSelected] = useState([]);\n  useEffect(() => {\n    fetch();\n  }, []);\n  useEffect(() => {\n    if (isFavAdded) fetch();\n  }, [isFavAdded]);\n  useEffect(() => {\n    selDeselMeds('cancel');\n  }, [tableLength]);\n\n  const fetch = async () => {\n    try {\n      setLoader(true);\n      let res = await axios({ ...getFavouriteMeds,\n        data: {}\n      });\n\n      if (res) {\n        if (res.code === 'OK') {\n          setResponse(res.data);\n          setData(res.data);\n        } else Toast.error(res.message);\n      }\n\n      setLoader(false);\n    } catch {\n      setLoader(false);\n    }\n  };\n\n  const handleSearch = e => {\n    let val = e.target.value;\n\n    let newData = _.cloneDeep(response);\n\n    if (val) {\n      newData = newData.filter(x => {\n        let name = x.medicineFullName || x.name;\n        if (name) return name.toLowerCase().indexOf(val.toLowerCase()) >= 0;\n      });\n    }\n\n    setData(newData);\n  };\n\n  const SaveFav = () => {\n    console.log(\"SaveFav -> selected\", selected);\n    if (selected.length === 0) Toast.error('Please Select Medication');else if (selected.length > 3) Toast.error('You can select Maximum 3 per order');else if (selected.length + tableLength > 3) Toast.error('only 3 Medications are allowed');else {\n      onSaveFav(selected);\n      setSelected([]);\n      selDeselMeds();\n    } // setSaveLoader(true)\n    // let res = await axios({ ...getFavouriteMeds, data: {} })\n    // if (res) {\n    //     if (res.code === 'OK') {\n    //         setResponse(res.data)\n    //         setData(res.data)\n    //     } else\n    //         Toast.error(res.message)\n    // }\n    // setSaveLoader(false)\n  };\n\n  const selDeselMeds = str => {\n    let newData = [...data];\n    newData = newData.map(x => {\n      if (str === 'cancel') x.isAdded = x.isChecked = tableData.find(sel => sel._id === x._id) ? true : false;else x.isAdded = selected.find(sel => sel._id === x._id) ? true : false;\n      return x;\n    });\n    setData(newData);\n  };\n\n  const onSelFav = (e, obj) => {\n    let newSelected = [...selected];\n\n    if (e.target.checked) {\n      newSelected.push({\n        _id: obj._id,\n        orderType: obj.orderType,\n        // medStrip: false,\n        physicianId: obj.physicianId,\n        name: obj.name,\n        medication: obj.medicineFullName,\n        medicineFullName: obj.medicineFullName,\n        direction: obj.direction,\n        indication: obj.indication,\n        progressNote: obj.progressNote,\n        pharmacyNote: obj.pharmacyNote\n      });\n    } else {\n      let index = newSelected.findIndex(x => x._id === obj._id);\n      if (index >= 0) newSelected.splice(index, 1);\n    }\n\n    setSelected(newSelected);\n    let newData = [...data];\n    newData = newData.map(x => {\n      if (x._id === obj._id) x.isChecked = e.target.checked;\n      return x;\n    });\n    setData(newData);\n  };\n\n  const handleRemove = async opt => {\n    try {\n      setLoader(true);\n      let res = await axios({ ...removeFavouriteMeds,\n        data: {\n          id: opt._id\n        }\n      });\n\n      if (res) {\n        if (res.code === 'OK') {\n          let tempData = [...data];\n          tempData = tempData.filter(x => x._id !== opt._id);\n          setData(tempData);\n          Toast.success(res.message);\n        } else Toast.error(res.message);\n      }\n\n      setLoader(false);\n    } catch {\n      setLoader(false);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"right-create-box fav-meds\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bg-gray\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"sub-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 17\n    }\n  }, \"Favourites\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search-box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form_group no_mrgn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Search, {\n    placeholder: \"Search\",\n    onChange: handleSearch,\n    allowClear: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 25\n    }\n  }))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"daysport\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 9\n    }\n  }, data && data.length > 0 ? /*#__PURE__*/React.createElement(React.Fragment, null, data.map(x => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"daysportblock\",\n      key: x._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 32\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"day-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form_group inline_check\",\n      style: {\n        float: \"left\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(CheckBox, {\n      disabled: x.isAdded,\n      checked: x.isChecked,\n      label: x.medicineFullName,\n      onChange: e => onSelFav(e, x),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 37\n      }\n    }, \"directions : \", x.direction), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 37\n      }\n    }, \"Indication : \", x.indication)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"action_ico remove_ic\",\n      onClick: () => handleRemove(x),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Clear, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 37\n      }\n    }, \"Remove\"))));\n  }), \" \") : /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 25\n    }\n  }, \"No Data Found\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"small-text-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    class: \"btn small-add-btn\",\n    loading: saveLoader,\n    onClick: SaveFav,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 13\n    }\n  }, \"ADD\"), /*#__PURE__*/React.createElement(\"p\", {\n    class: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 13\n    }\n  }, \"Maximum 3 per order\")));\n};\n\nexport default List;","map":{"version":3,"sources":["/home/gauravpendherkar/DemoWriti/src/components/Prescription/MedFavourite.js"],"names":["React","useEffect","useState","getFavouriteMeds","removeFavouriteMeds","axios","Button","Search","Toast","CheckBox","Clear","_","require","List","props","tableLength","onSaveFav","tableData","isFavAdded","loader","setLoader","saveLoader","setSaveLoader","data","setData","response","setResponse","selected","setSelected","fetch","selDeselMeds","res","code","error","message","handleSearch","e","val","target","value","newData","cloneDeep","filter","x","name","medicineFullName","toLowerCase","indexOf","SaveFav","console","log","length","str","map","isAdded","isChecked","find","sel","_id","onSelFav","obj","newSelected","checked","push","orderType","physicianId","medication","direction","indication","progressNote","pharmacyNote","index","findIndex","splice","handleRemove","opt","id","tempData","success","float"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { getFavouriteMeds, removeFavouriteMeds } from '../../services/api/routes/prescription';\nimport axios from '../../services/api/services/common'\nimport { Button, Search, Toast, CheckBox } from '../../components/common'\nimport { Clear } from '../../assets/images/index'\nconst _ = require('lodash')\n\nconst List = (props) => {\n    const { tableLength, onSaveFav, tableData, isFavAdded } = props\n    const [loader, setLoader] = useState(false)\n    const [saveLoader, setSaveLoader] = useState(false)\n    const [data, setData] = useState([])\n    const [response, setResponse] = useState()\n    const [selected, setSelected] = useState([])\n\n    useEffect(() => {\n        fetch()\n    }, [])\n\n    useEffect(() => {\n        if (isFavAdded)\n            fetch()\n    }, [isFavAdded])\n\n    useEffect(() => {\n        selDeselMeds('cancel')\n    }, [tableLength])\n\n    const fetch = async () => {\n        try {\n            setLoader(true)\n            let res = await axios({ ...getFavouriteMeds, data: {} })\n            if (res) {\n                if (res.code === 'OK') {\n                    setResponse(res.data)\n                    setData(res.data)\n                } else\n                    Toast.error(res.message)\n            }\n            setLoader(false)\n        } catch{ setLoader(false) }\n    }\n\n    const handleSearch = (e) => {\n        let val = e.target.value\n        let newData = _.cloneDeep(response)\n        if (val) {\n            newData = newData.filter(x => {\n                let name = x.medicineFullName || x.name\n                if (name)\n                    return name.toLowerCase().indexOf(val.toLowerCase()) >= 0\n            })\n        }\n        setData(newData)\n    }\n\n    const SaveFav = () => {\n        console.log(\"SaveFav -> selected\", selected)\n        if (selected.length === 0)\n            Toast.error('Please Select Medication')\n        else if (selected.length > 3)\n            Toast.error('You can select Maximum 3 per order')\n        else if (selected.length + tableLength > 3)\n            Toast.error('only 3 Medications are allowed')\n        else {\n            onSaveFav(selected)\n            setSelected([])\n            selDeselMeds()\n        }\n        // setSaveLoader(true)\n        // let res = await axios({ ...getFavouriteMeds, data: {} })\n        // if (res) {\n        //     if (res.code === 'OK') {\n        //         setResponse(res.data)\n        //         setData(res.data)\n        //     } else\n        //         Toast.error(res.message)\n        // }\n        // setSaveLoader(false)\n    }\n\n    const selDeselMeds = (str) => {\n        let newData = [...data]\n        newData = newData.map(x => {\n            if (str === 'cancel')\n                x.isAdded = x.isChecked = tableData.find(sel => sel._id === x._id) ? true : false\n            else x.isAdded = selected.find(sel => sel._id === x._id) ? true : false\n            return x\n        })\n        setData(newData)\n    }\n\n    const onSelFav = (e, obj) => {\n        let newSelected = [...selected]\n        if (e.target.checked) {\n            newSelected.push({\n                _id: obj._id,\n                orderType: obj.orderType,\n                // medStrip: false,\n                physicianId: obj.physicianId,\n                name: obj.name,\n                medication: obj.medicineFullName,\n                medicineFullName: obj.medicineFullName,\n                direction: obj.direction,\n                indication: obj.indication,\n                progressNote: obj.progressNote,\n                pharmacyNote: obj.pharmacyNote,\n            })\n        } else {\n            let index = newSelected.findIndex(x => x._id === obj._id)\n            if (index >= 0)\n                newSelected.splice(index, 1)\n        }\n        setSelected(newSelected)\n\n        let newData = [...data]\n        newData = newData.map(x => {\n            if (x._id === obj._id)\n                x.isChecked = e.target.checked\n            return x\n        })\n        setData(newData)\n    }\n\n    const handleRemove = async opt => {\n        try {\n            setLoader(true)\n            let res = await axios({ ...removeFavouriteMeds, data: { id: opt._id } })\n            if (res) {\n                if (res.code === 'OK') {\n                    let tempData = [...data]\n                    tempData = tempData.filter(x => x._id !== opt._id)\n                    setData(tempData)\n                    Toast.success(res.message)\n                } else\n                    Toast.error(res.message)\n            }\n            setLoader(false)\n        } catch{ setLoader(false) }\n    }\n\n    return <div className=\"right-create-box fav-meds\">\n        <div className=\"bg-gray\">\n            <div className=\"d-flex-center\">\n                <span className=\"sub-text\">Favourites</span>\n                <div className=\"search-box\">\n                    <div className=\"form_group no_mrgn\">\n                        <Search placeholder=\"Search\" onChange={handleSearch} allowClear={true} />\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div className=\"daysport\">\n            {data && data.length > 0 ? <>\n                {\n                    data.map(x => {\n                        return <div className=\"daysportblock\" key={x._id}>\n                            <div className=\"day-block\">\n                                <div className=\"form_group inline_check\" style={{ float: \"left\" }}>\n                                    <CheckBox disabled={x.isAdded} checked={x.isChecked}\n                                        label={x.medicineFullName}\n                                        onChange={(e) => onSelFav(e, x)} />\n                                    <p>directions : {x.direction}</p>\n                                    <p>Indication : {x.indication}</p>\n\n                                </div>\n\n                                <div className=\"action_ico remove_ic\" onClick={() => handleRemove(x)}>\n                                    <Clear />\n                                    <p>Remove</p>\n                                </div>\n\n                            </div>\n                        </div>\n                    })\n                } </> : <p className=\"text-center\">No Data Found</p>\n            }\n        </div>\n        <div className=\"small-text-btn\">\n            <Button class=\"btn small-add-btn\" loading={saveLoader} onClick={SaveFav}>ADD</Button>\n            <p class=\"\">Maximum 3 per order</p>\n        </div>\n    </div>\n\n}\n\nexport default List"]},"metadata":{},"sourceType":"module"}