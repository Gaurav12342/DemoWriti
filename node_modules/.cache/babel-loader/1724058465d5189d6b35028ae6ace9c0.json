{"ast":null,"code":"var _jsxFileName = \"/home/gauravpendherkar/DemoWriti/src/components/SubmasterFilter.js\";\nimport React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { Select, Option } from './common';\nimport axios from '../services/api/services/common';\nimport { masterPaginate } from '../services/api/routes/master';\n\nconst _ = require('lodash');\n\nconst SubmasterFilter = props => {\n  const {\n    placeholder,\n    onChange,\n    authUser,\n    homeId,\n    multiple,\n    defaultValue,\n    code,\n    allowClear\n  } = props;\n  const [data, setData] = useState([]);\n  const [loader, setLoader] = useState(false);\n  useEffect(() => {\n    fetch();\n  }, [code]);\n\n  const fetch = () => {\n    setLoader(true);\n    let data = {\n      \"query\": {\n        \"fields\": [\"isActive\", \"name\", \"code\", \"masterForMedium\"],\n        \"find\": {\n          \"isActive\": true,\n          \"code\": code\n        },\n        \"populate\": [{\n          \"subMaster\": [\"isActive\", \"name\", \"code\", \"masterForMedium\", \"homeId\", \"pharmacyId\"],\n          \"match\": {\n            \"isActive\": true\n          }\n        }],\n        \"sortBy\": {\n          \"createdAt\": \"DESC\"\n        }\n      }\n    };\n    axios({ ...masterPaginate,\n      data\n    }).then(data => {\n      if (data.code === 'OK') {\n        if (data.data.data.length > 0 && data.data.data[0].subMaster.length > 0) {\n          setData(data.data.data[0].subMaster);\n        }\n      }\n\n      setLoader(false);\n    }).catch(err => {\n      setLoader(false);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Select, {\n    multiple: multiple,\n    loading: loader,\n    placeholder: placeholder,\n    showSearch: true,\n    defaultValue: defaultValue || undefined,\n    onChange: onChange,\n    allowClear: allowClear,\n    filterOption: (input, option) => option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }\n  }, data.map(curObj => {\n    return /*#__PURE__*/React.createElement(Option, {\n      key: curObj._id,\n      value: curObj._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 29\n      }\n    }, curObj.name);\n  })));\n};\n\nconst mapStateToProps = ({\n  auth\n}) => {\n  const {\n    authUser\n  } = auth;\n  return {\n    authUser\n  };\n};\n\nSubmasterFilter.defaultProps = {\n  allowClear: true,\n  placeholder: 'Select Type'\n};\nSubmasterFilter.propTypes = {\n  allowClear: PropTypes.bool,\n  placeholder: PropTypes.string\n};\nexport default connect(mapStateToProps)(SubmasterFilter);","map":{"version":3,"sources":["/home/gauravpendherkar/DemoWriti/src/components/SubmasterFilter.js"],"names":["React","useState","useEffect","connect","PropTypes","Select","Option","axios","masterPaginate","_","require","SubmasterFilter","props","placeholder","onChange","authUser","homeId","multiple","defaultValue","code","allowClear","data","setData","loader","setLoader","fetch","then","length","subMaster","catch","err","undefined","input","option","children","toLowerCase","indexOf","map","curObj","_id","name","mapStateToProps","auth","defaultProps","propTypes","bool","string"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { Select, Option } from './common';\nimport axios from '../services/api/services/common';\nimport { masterPaginate } from '../services/api/routes/master'\nconst _ = require('lodash');\n\nconst SubmasterFilter = (props) => {\n    const { placeholder, onChange, authUser, homeId, multiple, defaultValue, code ,allowClear} = props;\n    const [data, setData] = useState([]);\n    const [loader, setLoader] = useState(false);\n\n    useEffect(() => {\n        fetch()\n    }, [code])\n\n    const fetch = () => {\n        setLoader(true)\n        let data = {\n            \"query\": {\n                \"fields\": [\"isActive\", \"name\", \"code\", \"masterForMedium\"],\n                \"find\": {\n                    \"isActive\": true,\n                    \"code\": code\n                },\n                \"populate\": [\n                    {\n                        \"subMaster\": [\"isActive\", \"name\", \"code\", \"masterForMedium\", \"homeId\", \"pharmacyId\"],\n                        \"match\": { \"isActive\": true }\n                    }\n                ],\n                \"sortBy\": {\n                    \"createdAt\": \"DESC\"\n                },\n            }\n        }\n\n        axios({ ...masterPaginate, data }).then((data) => {\n            if (data.code === 'OK') {\n                if (data.data.data.length > 0 && data.data.data[0].subMaster.length > 0) {\n                    setData(data.data.data[0].subMaster)\n                }\n            }\n            setLoader(false)\n        }).catch(err => {\n            setLoader(false)\n        })\n    }\n\n    return (\n        <React.Fragment>\n            <Select\n                multiple={multiple}\n                loading={loader}\n                placeholder={placeholder}\n                showSearch\n                defaultValue={defaultValue || undefined}\n                onChange={onChange}\n                allowClear = {allowClear}\n                filterOption={(input, option) =>\n                    option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n                }\n            >\n                {\n                    data.map((curObj) => {\n                        return (\n                            <Option key={curObj._id} value={curObj._id}>\n                                {curObj.name}\n                            </Option>\n                        );\n                    })\n                }\n            </Select>\n        </React.Fragment>\n    );\n};\n\nconst mapStateToProps = ({ auth }) => {\n    const { authUser } = auth;\n    return { authUser };\n};\n\nSubmasterFilter.defaultProps = {\n    allowClear: true,\n    placeholder: 'Select Type',\n};\nSubmasterFilter.propTypes = {\n    allowClear: PropTypes.bool,\n    placeholder: PropTypes.string,\n};\nexport default connect(mapStateToProps)(SubmasterFilter);\n"]},"metadata":{},"sourceType":"module"}