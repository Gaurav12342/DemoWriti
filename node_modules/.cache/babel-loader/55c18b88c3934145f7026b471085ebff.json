{"ast":null,"code":"var _jsxFileName = \"/home/gauravpendherkar/DemoWriti/src/components/common/Popup/GlobalSearch.js\";\nimport React, { Component } from 'react'; // import ReactModal from 'react-modal';\n\nimport Dialog from 'rc-dialog';\nimport RxOrder from './RxOrderModalTab';\nimport ResidentTab from '../../../containers/GlobalSearch/components/DetailView';\nimport PmrTab from './PmrModalTab';\nimport { Input, Search } from '../../../components/common/index';\nimport { MODULE } from '../../../constants/subscription';\nimport _ from 'lodash';\nimport createForm from 'rc-form/lib/createForm';\nimport Button from '../Button';\nimport axios from '../../../services/api/services/common';\nimport { SerachPaginate } from '../../../services/api/routes/globalSearch';\nimport { Toast } from '../../common';\nimport DetailView from '../../../containers/GlobalSearch/components/DetailView';\nimport DetailViewForAll from '../../../containers/GlobalSearch/components/DetailViewForAll';\nexport const TabConst = {\n  All: {\n    Name: \"All\",\n    Value: \"\"\n  },\n  RESIDENT: {\n    Name: \"Resident\",\n    Value: MODULE.RESIDENT,\n    Response_Key: \"RESIDENT\"\n  },\n  PMR: {\n    Name: \"PMR\",\n    Value: MODULE.PMR,\n    Response_Key: \"PMR\"\n  },\n  PRESCRIPTION_ORDER: {\n    Name: \"Rx Order\",\n    Value: MODULE.RX_ORDER,\n    Response_Key: \"PRESCRIPTION_ORDER\"\n  },\n  // DigitalBinder: {\n  //     Name: \"Digital Binder\",\n  //     Value: MODULE.DIGITAL_BINDER,\n  //     Response_Key: \"\"\n  // },\n  // VirtualVisit: {\n  //     Name: \"Virtual Visit\",\n  //     Value: MODULE.VIRTUAL_VISIT,\n  //     Response_Key: \"\"\n  // },\n  // E_Processing: {\n  //     Name: \"E-Processing\",\n  //     Value: MODULE.E_PROCESSING,\n  //     Response_Key: \"\"\n  // },\n  TODO: {\n    Name: \"To-Do\",\n    Value: MODULE.TODO,\n    Response_Key: \"TODO\"\n  },\n  // AdmissionReadmission: {\n  //     Name: \"Admissio/Re-Admission\",\n  //     Value: MODULE.ADMISSION_READMISSION,\n  //     Response_Key: \"PRESCRIPTION_ORDER\"\n  // },\n  X_RAY_US: {\n    Name: \"X-Ray\",\n    Value: MODULE.X_RAY_US,\n    Response_Key: \"X_RAY_US\"\n  }\n};\n\nclass SearchPopup extends Component {\n  constructor() {\n    super();\n\n    this.modalActionFn = val => {\n      this.setState({\n        module: val,\n        data: [],\n        dataForAll: [],\n        count: 0,\n        filter: { ...this.state.filter,\n          page: 1\n        }\n      }, () => {\n        var _this$state$filter, _this$state$filter$se;\n\n        if ((_this$state$filter = this.state.filter) === null || _this$state$filter === void 0 ? void 0 : (_this$state$filter$se = _this$state$filter.search) === null || _this$state$filter$se === void 0 ? void 0 : _this$state$filter$se.keyword) {\n          this.searchGlobal();\n        }\n      });\n    };\n\n    this.onChange = e => {\n      this.setState({\n        data: [],\n        count: 0,\n        filter: { ...this.state.filter,\n          search: {\n            keyword: e.target.value\n          },\n          page: 1\n        }\n      });\n    };\n\n    this.handleSearchButton = value => {\n      this.setState({\n        data: [],\n        count: 0,\n        filter: { ...this.state.filter,\n          page: 1,\n          search: {\n            keyword: value\n          }\n        }\n      }, () => this.searchGlobal());\n    };\n\n    this.searchGlobal = async () => {\n      this.setState({\n        loader: true\n      });\n      let res = await axios({ ...SerachPaginate,\n        data: {\n          query: this.state.filter,\n          module: this.state.module\n        }\n      });\n\n      if (res) {\n        if (res.code === 'OK') {\n          if (this.state.module !== TabConst.All.Value) {\n            let Response_Key = _.filter(Object.keys(TabConst), k => {\n              if (TabConst[k][\"Value\"] === this.state.module) {\n                return k;\n              }\n            });\n\n            Response_Key = TabConst[Response_Key[0]][\"Response_Key\"];\n            this.setState({\n              data: _.concat(this.state.data, res.data[Response_Key].list),\n              count: res.data[Response_Key].count,\n              hasMore: res.data[Response_Key].list.length === res.data[Response_Key].count ? false : true\n            });\n          } else {\n            console.log(\"ðŸš€ ~ file: GlobalSearch.js ~ line 159 ~ SearchPopup ~ searchGlobal= ~ res.data\", res.data);\n            this.setState({\n              dataForAll: res.data\n            });\n          }\n        } else {\n          Toast.error(res.message);\n        }\n      }\n\n      this.setState({\n        loader: false\n      });\n    };\n\n    this.onInfiniteOnLoad = val => {\n      let tempArr = [...this.state.data];\n\n      if (tempArr.length === this.state.count) {\n        this.setState({\n          hasMore: false\n        });\n        return;\n      }\n\n      this.setState({\n        loading: true,\n        filter: { ...this.state.filter,\n          page: this.state.filter.page + 1\n        }\n      }, () => this.searchGlobal());\n    };\n\n    this.state = {\n      dataForAll: [],\n      module: TabConst.RESIDENT.Value,\n      hasMore: true,\n      data: [],\n      count: 0,\n      loader: false,\n      filter: {\n        page: 1,\n        limit: 5\n      }\n    };\n  }\n\n  handleCloseModal() {\n    this.setState({\n      searchModal: false\n    });\n  }\n\n  render() {\n    const {\n      form\n    } = this.props;\n    const {\n      validateFields\n    } = form;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Dialog, {\n      visible: this.props.visible,\n      onClose: this.props.onClosed,\n      className: \"search_popup_wrap\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"popup-search-con \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"with-search-component\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form_group search-box\",\n      style: {\n        marginRight: '2%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Search, {\n      allowClear: true // form = {form}\n      ,\n      placeholder: \"Search\",\n      style: {\n        width: '250px'\n      },\n      onChange: this.onChange,\n      onSearch: data => {\n        this.handleSearchButton(data);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 33\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"rx-btns drug-bts\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 25\n      }\n    }, _.map(TabConst, tab => {\n      return /*#__PURE__*/React.createElement(\"a\", {\n        onClick: () => this.modalActionFn(tab.Value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 44\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: this.state.module === tab.Value ? 'r-o-btn' : '',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 94\n        }\n      }, tab.Name, \" \"));\n    })), this.state.module !== TabConst.All.Value ? /*#__PURE__*/React.createElement(DetailView, {\n      loader: this.state.loader,\n      hasMore: this.state.hasMore,\n      data: this.state.data,\n      onInfiniteOnLoad: this.onInfiniteOnLoad,\n      type: this.state.module,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 34\n      }\n    }) : /*#__PURE__*/React.createElement(DetailViewForAll, {\n      loader: this.state.loader,\n      data: this.state.dataForAll,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"close-btn\",\n      onClick: () => this.props.onClosed(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      alt: \"#\",\n      src: require('../../../assets/images/popup/close.svg'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 25\n      }\n    }))));\n  }\n\n}\n\nexport default createForm()(SearchPopup);","map":{"version":3,"sources":["/home/gauravpendherkar/DemoWriti/src/components/common/Popup/GlobalSearch.js"],"names":["React","Component","Dialog","RxOrder","ResidentTab","PmrTab","Input","Search","MODULE","_","createForm","Button","axios","SerachPaginate","Toast","DetailView","DetailViewForAll","TabConst","All","Name","Value","RESIDENT","Response_Key","PMR","PRESCRIPTION_ORDER","RX_ORDER","TODO","X_RAY_US","SearchPopup","constructor","modalActionFn","val","setState","module","data","dataForAll","count","filter","state","page","search","keyword","searchGlobal","onChange","e","target","value","handleSearchButton","loader","res","query","code","Object","keys","k","concat","list","hasMore","length","console","log","error","message","onInfiniteOnLoad","tempArr","loading","limit","handleCloseModal","searchModal","render","form","props","validateFields","visible","onClosed","marginRight","width","map","tab","require"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n// import ReactModal from 'react-modal';\nimport Dialog from 'rc-dialog';\nimport RxOrder from './RxOrderModalTab';\nimport ResidentTab from '../../../containers/GlobalSearch/components/DetailView';\nimport PmrTab from './PmrModalTab';\nimport { Input, Search } from '../../../components/common/index';\nimport { MODULE } from '../../../constants/subscription';\nimport _ from 'lodash'\nimport createForm from 'rc-form/lib/createForm';\nimport Button from '../Button';\nimport axios from '../../../services/api/services/common';\nimport {\n    SerachPaginate\n} from '../../../services/api/routes/globalSearch';\nimport { Toast } from '../../common';\nimport DetailView from '../../../containers/GlobalSearch/components/DetailView';\nimport DetailViewForAll from '../../../containers/GlobalSearch/components/DetailViewForAll';\n\nexport const TabConst = {\n    All: {\n        Name: \"All\",\n        Value: \"\",\n    },\n    RESIDENT: {\n        Name: \"Resident\",\n        Value: MODULE.RESIDENT,\n        Response_Key: \"RESIDENT\"\n    },\n    PMR: {\n        Name: \"PMR\",\n        Value: MODULE.PMR,\n        Response_Key: \"PMR\"\n\n    },\n    PRESCRIPTION_ORDER: {\n        Name: \"Rx Order\",\n        Value: MODULE.RX_ORDER,\n        Response_Key: \"PRESCRIPTION_ORDER\"\n\n    },\n    // DigitalBinder: {\n    //     Name: \"Digital Binder\",\n    //     Value: MODULE.DIGITAL_BINDER,\n    //     Response_Key: \"\"\n\n    // },\n    // VirtualVisit: {\n    //     Name: \"Virtual Visit\",\n    //     Value: MODULE.VIRTUAL_VISIT,\n    //     Response_Key: \"\"\n\n    // },\n    // E_Processing: {\n    //     Name: \"E-Processing\",\n    //     Value: MODULE.E_PROCESSING,\n    //     Response_Key: \"\"\n\n    // },\n    TODO: {\n        Name: \"To-Do\",\n        Value: MODULE.TODO,\n        Response_Key: \"TODO\"\n\n    },\n    // AdmissionReadmission: {\n    //     Name: \"Admissio/Re-Admission\",\n    //     Value: MODULE.ADMISSION_READMISSION,\n    //     Response_Key: \"PRESCRIPTION_ORDER\"\n\n    // },\n    X_RAY_US: {\n        Name: \"X-Ray\",\n        Value: MODULE.X_RAY_US,\n        Response_Key: \"X_RAY_US\"\n\n    },\n}\nclass SearchPopup extends Component {\n\n    constructor() {\n        super();\n        this.state = {\n            dataForAll: [],\n            module: TabConst.RESIDENT.Value,\n            hasMore: true,\n            data: [],\n            count: 0,\n            loader: false,\n            filter: {\n                page: 1,\n                limit: 5\n            }\n        };\n\n\n    }\n\n\n    handleCloseModal() {\n        this.setState({ searchModal: false });\n\n    }\n    modalActionFn = (val) => {\n        this.setState({\n            module: val,\n            data: [],\n            dataForAll: [],\n            count: 0,\n            filter: {\n                ...this.state.filter,\n                page: 1,\n            }\n        }, () => {\n            if (this.state.filter?.search?.keyword) {\n                this.searchGlobal()\n            }\n        })\n    };\n    onChange = (e) => {\n        this.setState({\n            data: [],\n            count: 0,\n            filter: {\n                ...this.state.filter,\n                search: {\n                    keyword: e.target.value\n                },\n                page: 1,\n            }\n        })\n    }\n    handleSearchButton = (value) => {\n        this.setState({\n            data: [],\n            count: 0,\n            filter: {\n                ...this.state.filter,\n                page: 1,\n                search: {\n                    keyword: value\n                },\n            }\n        }, () => this.searchGlobal())\n    }\n    searchGlobal = async () => {\n        this.setState({\n            loader: true\n        })\n        let res = await axios({ ...SerachPaginate, data: { query: this.state.filter, module: this.state.module } })\n        if (res) {\n            if (res.code === 'OK') {\n                if (this.state.module !== TabConst.All.Value) {\n                    let Response_Key = _.filter(Object.keys(TabConst), k => {\n                        if (TabConst[k][\"Value\"] === this.state.module) {\n                            return k\n                        }\n                    })\n                    Response_Key = TabConst[Response_Key[0]][\"Response_Key\"]\n                    this.setState({\n                        data: _.concat(this.state.data, res.data[Response_Key].list),\n                        count: res.data[Response_Key].count,\n                        hasMore: res.data[Response_Key].list.length === res.data[Response_Key].count ? false : true,\n                    })\n                }\n                else {\n\n                    console.log(\"ðŸš€ ~ file: GlobalSearch.js ~ line 159 ~ SearchPopup ~ searchGlobal= ~ res.data\", res.data)\n                    this.setState({\n                        dataForAll: res.data\n                    })\n                }\n            } else {\n                Toast.error(res.message)\n            }\n        }\n        this.setState({\n            loader: false\n        })\n    }\n    onInfiniteOnLoad = (val) => {\n\n        let tempArr = [...this.state.data]\n        if (tempArr.length === this.state.count) {\n            this.setState({ hasMore: false })\n            return\n        }\n        this.setState({\n            loading: true,\n            filter: {\n                ...this.state.filter,\n                page: this.state.filter.page + 1\n            }\n        }, () => this.searchGlobal())\n    }\n    render() {\n\n        const { form } = this.props\n        const { validateFields } = form\n        return (<>\n            {\n\n\n                <Dialog visible={this.props.visible}\n                    onClose={this.props.onClosed}\n                    className=\"search_popup_wrap\"\n                >\n\n                    <div className=\"popup-search-con \">\n                        <div className=\"with-search-component\">\n                            <div className='form_group search-box' style={{ marginRight: '2%' }}>\n                                <Search\n                                    allowClear={true}\n                                    // form = {form}\n                                    placeholder='Search'\n                                    style={{ width: '250px' }}\n                                    onChange={this.onChange}\n                                    onSearch={(data) => { this.handleSearchButton(data) }}\n                                />\n                                {/* <Button onClick={this.handleSearchButton}>Search</Button> */}\n                            </div>\n                        </div>\n\n\n                        <div className=\"rx-btns drug-bts\">\n                            {\n                                _.map(TabConst, tab => {\n                                    return <a onClick={() => this.modalActionFn(tab.Value)} ><button className={(this.state.module === tab.Value) ? 'r-o-btn' : ''}>{tab.Name} </button></a>\n                                })\n                            }\n\n                        </div>\n\n                        {\n                            this.state.module !== TabConst.All.Value ?\n                                (<DetailView loader={this.state.loader} hasMore={this.state.hasMore} data={this.state.data} onInfiniteOnLoad={this.onInfiniteOnLoad} type={this.state.module} />)\n                                :\n                                <DetailViewForAll loader={this.state.loader} data={this.state.dataForAll} />\n                        }\n\n\n                    </div>\n\n                    <button className=\"close-btn\" onClick={() => this.props.onClosed()}>\n                        <img alt=\"#\" src={require('../../../assets/images/popup/close.svg')} />\n                    </button>\n                </Dialog>\n\n\n            }\n\n        </>)\n    }\n}\nexport default createForm()(SearchPopup) "]},"metadata":{},"sourceType":"module"}